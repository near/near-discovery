import { useSetChain } from '@web3-onboard/react';
import { ethers } from 'ethers';
import { useEffect, useState } from 'react';
import { styled } from 'styled-components';

import { QUEST_PATH } from '@/config/quest';
import { useEthersProviderContext } from '@/data/web3';
import { useDefaultLayout } from '@/hooks/useLayout';
import { useUUIdStore } from '@/stores/uuid';
import { deleteRequest, get } from '@/utils/http';
import type { NextPageWithLayout } from '@/utils/types';

import QuestCard from './quest-card';

const arrowDown = (
  <svg width="8" height="15" viewBox="0 0 8 15" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path
      d="M3.64645 14.3536C3.84171 14.5488 4.15829 14.5488 4.35355 14.3536L7.53553 11.1716C7.7308 10.9763 7.7308 10.6597 7.53553 10.4645C7.34027 10.2692 7.02369 10.2692 6.82843 10.4645L4 13.2929L1.17157 10.4645C0.97631 10.2692 0.659728 10.2692 0.464466 10.4645C0.269203 10.6597 0.269203 10.9763 0.464466 11.1716L3.64645 14.3536ZM3.5 -2.18557e-08L3.5 14L4.5 14L4.5 2.18557e-08L3.5 -2.18557e-08Z"
      fill="#EBF479"
    />
  </svg>
);

const arrowUp = (
  <svg width="8" height="15" viewBox="0 0 8 15" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path
      d="M3.64645 0.646446C3.84171 0.451184 4.15829 0.451184 4.35355 0.646446L7.53553 3.82843C7.7308 4.02369 7.7308 4.34027 7.53553 4.53553C7.34027 4.7308 7.02369 4.7308 6.82843 4.53553L4 1.70711L1.17157 4.53553C0.97631 4.7308 0.659728 4.7308 0.464466 4.53553C0.269203 4.34027 0.269203 4.02369 0.464466 3.82843L3.64645 0.646446ZM3.5 15L3.5 1L4.5 1L4.5 15L3.5 15Z"
      fill="#EBF479"
    />
  </svg>
);

const searchTip = (
  <svg width="215" height="152" viewBox="0 0 215 152" fill="none" xmlns="http://www.w3.org/2000/svg">
    <rect x="1" y="68" width="213" height="83" rx="16" stroke="url(#paint0_linear_397_842)" stroke-dasharray="2 2" />
    <path
      d="M101.685 62.6273C111.355 56.0146 117.18 35.8383 110.414 31.841C101.956 26.8443 95.6599 38.0521 100.887 41.613C106.114 45.1739 118.671 39.3792 112.732 23.6633C107.982 11.0906 99.8731 4.2526 96.4125 2.40518M96.4125 2.40518L96.5708 12.8443M96.4125 2.40518L107.677 3.00067"
      stroke="url(#paint1_linear_397_842)"
      stroke-linecap="round"
    />
    <path
      d="M23.6089 105V94.312H24.9849V105H23.6089ZM27.5765 105V97.48H28.8245V98.664C29.0485 98.248 29.3792 97.9227 29.8165 97.688C30.2538 97.4427 30.7818 97.32 31.4005 97.32C32.2645 97.32 32.9418 97.5653 33.4325 98.056C33.9232 98.5467 34.1685 99.32 34.1685 100.376V105H32.8725V100.52C32.8725 99.7947 32.7232 99.272 32.4245 98.952C32.1365 98.6213 31.6885 98.456 31.0805 98.456C30.3765 98.456 29.8325 98.7013 29.4485 99.192C29.0645 99.672 28.8725 100.328 28.8725 101.16V105H27.5765ZM36.7015 107.912V97.48H37.9495V98.744C38.1842 98.3173 38.5415 97.976 39.0215 97.72C39.5015 97.4533 40.0615 97.32 40.7015 97.32C41.3948 97.32 42.0135 97.48 42.5575 97.8C43.1015 98.12 43.5282 98.5733 43.8375 99.16C44.1468 99.736 44.3015 100.429 44.3015 101.24C44.3015 102.04 44.1468 102.733 43.8375 103.32C43.5282 103.907 43.1015 104.36 42.5575 104.68C42.0135 105 41.3948 105.16 40.7015 105.16C40.0828 105.16 39.5388 105.037 39.0695 104.792C38.6002 104.547 38.2428 104.221 37.9975 103.816V107.912H36.7015ZM40.4615 104.024C40.9522 104.024 41.3842 103.912 41.7575 103.688C42.1415 103.464 42.4402 103.144 42.6535 102.728C42.8668 102.312 42.9735 101.816 42.9735 101.24C42.9735 100.664 42.8668 100.168 42.6535 99.752C42.4402 99.336 42.1415 99.016 41.7575 98.792C41.3842 98.568 40.9522 98.456 40.4615 98.456C39.9708 98.456 39.5335 98.568 39.1495 98.792C38.7762 99.016 38.4828 99.336 38.2695 99.752C38.0562 100.168 37.9495 100.664 37.9495 101.24C37.9495 101.816 38.0562 102.312 38.2695 102.728C38.4828 103.144 38.7762 103.464 39.1495 103.688C39.5335 103.912 39.9708 104.024 40.4615 104.024ZM49.1883 105.16C48.3243 105.16 47.6469 104.915 47.1562 104.424C46.6656 103.933 46.4203 103.16 46.4203 102.104V97.48H47.7163V101.96C47.7163 102.685 47.8603 103.213 48.1483 103.544C48.4469 103.864 48.9003 104.024 49.5083 104.024C50.2123 104.024 50.7563 103.784 51.1403 103.304C51.5243 102.813 51.7163 102.152 51.7163 101.32V97.48H53.0123V105H51.7643V103.816C51.5403 104.232 51.2096 104.563 50.7723 104.808C50.3349 105.043 49.8069 105.16 49.1883 105.16ZM58.5853 105.096C57.8386 105.096 57.2786 104.92 56.9053 104.568C56.5426 104.205 56.3613 103.645 56.3613 102.888V98.6H54.6813V97.48H56.3613V95.336H57.6573V97.48H59.6413V98.6H57.6573V102.792C57.6573 103.187 57.7533 103.485 57.9453 103.688C58.1373 103.88 58.4306 103.976 58.8253 103.976C58.9533 103.976 59.0973 103.971 59.2573 103.96C59.4173 103.949 59.5453 103.933 59.6413 103.912V104.968C59.5239 105.011 59.3639 105.043 59.1613 105.064C58.9693 105.085 58.7773 105.096 58.5853 105.096ZM67.3231 105L64.6511 97.48H66.0431L67.9631 103.368L69.9631 97.48H71.2111L73.1951 103.368L75.1311 97.48H76.5231L73.8511 105H72.5871L70.5871 99.112L68.5871 105H67.3231ZM78.2484 105V94.312H79.5444V98.584C79.779 98.1893 80.1044 97.88 80.5204 97.656C80.947 97.432 81.4644 97.32 82.0724 97.32C82.9364 97.32 83.6137 97.5653 84.1044 98.056C84.595 98.5467 84.8404 99.32 84.8404 100.376V105H83.5444V100.52C83.5444 99.7947 83.395 99.272 83.0964 98.952C82.8084 98.6213 82.3604 98.456 81.7524 98.456C81.0484 98.456 80.5044 98.7013 80.1204 99.192C79.7364 99.672 79.5444 100.328 79.5444 101.16V105H78.2484ZM89.7734 105.16C89.1974 105.16 88.696 105.075 88.2694 104.904C87.8534 104.723 87.528 104.467 87.2934 104.136C87.0587 103.795 86.9414 103.389 86.9414 102.92C86.9414 102.451 87.0587 102.056 87.2934 101.736C87.528 101.416 87.8587 101.165 88.2854 100.984C88.712 100.792 89.208 100.664 89.7734 100.6L92.4934 100.264C92.4294 99.6453 92.2054 99.192 91.8214 98.904C91.448 98.6053 90.968 98.456 90.3814 98.456C90.0187 98.456 89.64 98.536 89.2454 98.696C88.8507 98.8453 88.44 99.0747 88.0134 99.384L87.4854 98.392C87.88 98.0613 88.3227 97.8 88.8134 97.608C89.3147 97.416 89.8374 97.32 90.3814 97.32C91.512 97.32 92.3654 97.5813 92.9414 98.104C93.5174 98.6267 93.8054 99.4 93.8054 100.424V105H92.5574V103.832C92.28 104.28 91.9014 104.616 91.4214 104.84C90.9414 105.053 90.392 105.16 89.7734 105.16ZM90.0134 104.024C90.5574 104.024 91.016 103.917 91.3894 103.704C91.7627 103.48 92.04 103.192 92.2214 102.84C92.4134 102.477 92.5094 102.099 92.5094 101.704V101.336L90.1094 101.64C89.512 101.715 89.0534 101.843 88.7334 102.024C88.424 102.195 88.2694 102.483 88.2694 102.888C88.2694 103.251 88.424 103.533 88.7334 103.736C89.0427 103.928 89.4694 104.024 90.0134 104.024ZM98.6165 105.096C97.8698 105.096 97.3098 104.92 96.9365 104.568C96.5738 104.205 96.3925 103.645 96.3925 102.888V98.6H94.7125V97.48H96.3925V95.336H97.6885V97.48H99.6725V98.6H97.6885V102.792C97.6885 103.187 97.7845 103.485 97.9765 103.688C98.1685 103.88 98.4618 103.976 98.8565 103.976C98.9845 103.976 99.1285 103.971 99.2885 103.96C99.4485 103.949 99.5765 103.933 99.6725 103.912V104.968C99.5552 105.011 99.3952 105.043 99.1925 105.064C99.0005 105.085 98.8085 105.096 98.6165 105.096ZM105.994 108.008C105.685 108.008 105.376 107.965 105.066 107.88C104.768 107.805 104.501 107.699 104.266 107.56L104.65 106.536C104.885 106.653 105.109 106.739 105.322 106.792C105.536 106.856 105.733 106.888 105.914 106.888C106.149 106.888 106.373 106.829 106.586 106.712C106.8 106.605 107.008 106.424 107.21 106.168C107.413 105.923 107.616 105.592 107.818 105.176L104.682 97.48H106.074L108.458 103.64L110.842 97.48H112.234L109.162 105C108.842 105.789 108.512 106.403 108.17 106.84C107.829 107.277 107.477 107.581 107.114 107.752C106.752 107.923 106.378 108.008 105.994 108.008ZM116.767 105.16C116.01 105.16 115.338 105 114.751 104.68C114.164 104.349 113.706 103.891 113.375 103.304C113.044 102.717 112.879 102.029 112.879 101.24C112.879 100.451 113.044 99.7627 113.375 99.176C113.706 98.5893 114.164 98.136 114.751 97.816C115.338 97.4853 116.01 97.32 116.767 97.32C117.535 97.32 118.207 97.4853 118.783 97.816C119.37 98.136 119.828 98.5893 120.159 99.176C120.49 99.7627 120.655 100.451 120.655 101.24C120.655 102.029 120.49 102.717 120.159 103.304C119.828 103.891 119.37 104.349 118.783 104.68C118.207 105 117.535 105.16 116.767 105.16ZM116.767 104.024C117.279 104.024 117.727 103.912 118.111 103.688C118.495 103.464 118.794 103.144 119.007 102.728C119.22 102.312 119.327 101.816 119.327 101.24C119.327 100.664 119.22 100.168 119.007 99.752C118.794 99.336 118.495 99.016 118.111 98.792C117.727 98.568 117.279 98.456 116.767 98.456C116.255 98.456 115.807 98.568 115.423 98.792C115.039 99.016 114.74 99.336 114.527 99.752C114.314 100.168 114.207 100.664 114.207 101.24C114.207 101.816 114.314 102.312 114.527 102.728C114.74 103.144 115.039 103.464 115.423 103.688C115.807 103.912 116.255 104.024 116.767 104.024ZM125.516 105.16C124.652 105.16 123.975 104.915 123.484 104.424C122.994 103.933 122.748 103.16 122.748 102.104V97.48H124.044V101.96C124.044 102.685 124.188 103.213 124.476 103.544C124.775 103.864 125.228 104.024 125.836 104.024C126.54 104.024 127.084 103.784 127.468 103.304C127.852 102.813 128.044 102.152 128.044 101.32V97.48H129.34V105H128.092V103.816C127.868 104.232 127.538 104.563 127.1 104.808C126.663 105.043 126.135 105.16 125.516 105.16ZM137.636 105L134.964 97.48H136.356L138.276 103.368L140.276 97.48H141.524L143.508 103.368L145.444 97.48H146.836L144.164 105H142.9L140.9 99.112L138.9 105H137.636ZM150.336 105.16C149.76 105.16 149.259 105.075 148.832 104.904C148.416 104.723 148.091 104.467 147.856 104.136C147.621 103.795 147.504 103.389 147.504 102.92C147.504 102.451 147.621 102.056 147.856 101.736C148.091 101.416 148.421 101.165 148.848 100.984C149.275 100.792 149.771 100.664 150.336 100.6L153.056 100.264C152.992 99.6453 152.768 99.192 152.384 98.904C152.011 98.6053 151.531 98.456 150.944 98.456C150.581 98.456 150.203 98.536 149.808 98.696C149.413 98.8453 149.003 99.0747 148.576 99.384L148.048 98.392C148.443 98.0613 148.885 97.8 149.376 97.608C149.877 97.416 150.4 97.32 150.944 97.32C152.075 97.32 152.928 97.5813 153.504 98.104C154.08 98.6267 154.368 99.4 154.368 100.424V105H153.12V103.832C152.843 104.28 152.464 104.616 151.984 104.84C151.504 105.053 150.955 105.16 150.336 105.16ZM150.576 104.024C151.12 104.024 151.579 103.917 151.952 103.704C152.325 103.48 152.603 103.192 152.784 102.84C152.976 102.477 153.072 102.099 153.072 101.704V101.336L150.672 101.64C150.075 101.715 149.616 101.843 149.296 102.024C148.987 102.195 148.832 102.483 148.832 102.888C148.832 103.251 148.987 103.533 149.296 103.736C149.605 103.928 150.032 104.024 150.576 104.024ZM156.889 105V97.48H158.137V98.664C158.361 98.248 158.692 97.9227 159.129 97.688C159.566 97.4427 160.094 97.32 160.713 97.32C161.577 97.32 162.254 97.5653 162.745 98.056C163.236 98.5467 163.481 99.32 163.481 100.376V105H162.185V100.52C162.185 99.7947 162.036 99.272 161.737 98.952C161.449 98.6213 161.001 98.456 160.393 98.456C159.689 98.456 159.145 98.7013 158.761 99.192C158.377 99.672 158.185 100.328 158.185 101.16V105H156.889ZM168.632 105.096C167.885 105.096 167.325 104.92 166.952 104.568C166.589 104.205 166.408 103.645 166.408 102.888V98.6H164.728V97.48H166.408V95.336H167.704V97.48H169.688V98.6H167.704V102.792C167.704 103.187 167.8 103.485 167.992 103.688C168.184 103.88 168.477 103.976 168.872 103.976C169 103.976 169.144 103.971 169.304 103.96C169.464 103.949 169.592 103.933 169.688 103.912V104.968C169.571 105.011 169.411 105.043 169.208 105.064C169.016 105.085 168.824 105.096 168.632 105.096ZM178.554 105.096C177.807 105.096 177.247 104.92 176.874 104.568C176.511 104.205 176.33 103.645 176.33 102.888V98.6H174.65V97.48H176.33V95.336H177.626V97.48H179.61V98.6H177.626V102.792C177.626 103.187 177.722 103.485 177.914 103.688C178.106 103.88 178.399 103.976 178.794 103.976C178.922 103.976 179.066 103.971 179.226 103.96C179.386 103.949 179.514 103.933 179.61 103.912V104.968C179.493 105.011 179.333 105.043 179.13 105.064C178.938 105.085 178.746 105.096 178.554 105.096ZM184.986 105.16C184.228 105.16 183.556 105 182.97 104.68C182.383 104.349 181.924 103.891 181.594 103.304C181.263 102.717 181.098 102.029 181.098 101.24C181.098 100.451 181.263 99.7627 181.594 99.176C181.924 98.5893 182.383 98.136 182.97 97.816C183.556 97.4853 184.228 97.32 184.986 97.32C185.754 97.32 186.426 97.4853 187.002 97.816C187.588 98.136 188.047 98.5893 188.378 99.176C188.708 99.7627 188.874 100.451 188.874 101.24C188.874 102.029 188.708 102.717 188.378 103.304C188.047 103.891 187.588 104.349 187.002 104.68C186.426 105 185.754 105.16 184.986 105.16ZM184.986 104.024C185.498 104.024 185.946 103.912 186.33 103.688C186.714 103.464 187.012 103.144 187.226 102.728C187.439 102.312 187.546 101.816 187.546 101.24C187.546 100.664 187.439 100.168 187.226 99.752C187.012 99.336 186.714 99.016 186.33 98.792C185.946 98.568 185.498 98.456 184.986 98.456C184.474 98.456 184.026 98.568 183.642 98.792C183.258 99.016 182.959 99.336 182.746 99.752C182.532 100.168 182.426 100.664 182.426 101.24C182.426 101.816 182.532 102.312 182.746 102.728C182.959 103.144 183.258 103.464 183.642 103.688C184.026 103.912 184.474 104.024 184.986 104.024ZM38.448 124.16C37.7547 124.16 37.136 124 36.592 123.68C36.048 123.36 35.6213 122.907 35.312 122.32C35.0027 121.733 34.848 121.04 34.848 120.24C34.848 119.429 35.0027 118.736 35.312 118.16C35.6213 117.573 36.048 117.12 36.592 116.8C37.136 116.48 37.7547 116.32 38.448 116.32C39.0667 116.32 39.6107 116.443 40.08 116.688C40.5493 116.933 40.9067 117.259 41.152 117.664V113.312H42.448V124H41.2V122.736C40.9653 123.163 40.608 123.509 40.128 123.776C39.648 124.032 39.088 124.16 38.448 124.16ZM38.688 123.024C39.1787 123.024 39.6107 122.912 39.984 122.688C40.368 122.464 40.6667 122.144 40.88 121.728C41.0933 121.312 41.2 120.816 41.2 120.24C41.2 119.664 41.0933 119.168 40.88 118.752C40.6667 118.336 40.368 118.016 39.984 117.792C39.6107 117.568 39.1787 117.456 38.688 117.456C38.1973 117.456 37.76 117.568 37.376 117.792C37.0027 118.016 36.7093 118.336 36.496 118.752C36.2827 119.168 36.176 119.664 36.176 120.24C36.176 120.816 36.2827 121.312 36.496 121.728C36.7093 122.144 37.0027 122.464 37.376 122.688C37.76 122.912 38.1973 123.024 38.688 123.024ZM48.4388 124.16C47.6814 124.16 47.0094 124 46.4228 123.68C45.8361 123.349 45.3774 122.891 45.0468 122.304C44.7161 121.717 44.5508 121.029 44.5508 120.24C44.5508 119.451 44.7161 118.763 45.0468 118.176C45.3774 117.589 45.8361 117.136 46.4228 116.816C47.0094 116.485 47.6814 116.32 48.4388 116.32C49.2068 116.32 49.8788 116.485 50.4548 116.816C51.0414 117.136 51.5001 117.589 51.8308 118.176C52.1614 118.763 52.3268 119.451 52.3268 120.24C52.3268 121.029 52.1614 121.717 51.8308 122.304C51.5001 122.891 51.0414 123.349 50.4548 123.68C49.8788 124 49.2068 124.16 48.4388 124.16ZM48.4388 123.024C48.9508 123.024 49.3988 122.912 49.7828 122.688C50.1668 122.464 50.4654 122.144 50.6788 121.728C50.8921 121.312 50.9988 120.816 50.9988 120.24C50.9988 119.664 50.8921 119.168 50.6788 118.752C50.4654 118.336 50.1668 118.016 49.7828 117.792C49.3988 117.568 48.9508 117.456 48.4388 117.456C47.9268 117.456 47.4788 117.568 47.0948 117.792C46.7108 118.016 46.4121 118.336 46.1988 118.752C45.9854 119.168 45.8788 119.664 45.8788 120.24C45.8788 120.816 45.9854 121.312 46.1988 121.728C46.4121 122.144 46.7108 122.464 47.0948 122.688C47.4788 122.912 47.9268 123.024 48.4388 123.024ZM62.3265 124.16C61.6865 124.16 61.1265 124.032 60.6465 123.776C60.1665 123.509 59.8092 123.163 59.5745 122.736V124H58.3265V113.312H59.6225V117.664C59.8678 117.259 60.2252 116.933 60.6945 116.688C61.1638 116.443 61.7078 116.32 62.3265 116.32C63.0198 116.32 63.6385 116.48 64.1825 116.8C64.7265 117.12 65.1532 117.573 65.4625 118.16C65.7718 118.736 65.9265 119.429 65.9265 120.24C65.9265 121.04 65.7718 121.733 65.4625 122.32C65.1532 122.907 64.7265 123.36 64.1825 123.68C63.6385 124 63.0198 124.16 62.3265 124.16ZM62.0865 123.024C62.5772 123.024 63.0092 122.912 63.3825 122.688C63.7665 122.464 64.0652 122.144 64.2785 121.728C64.4918 121.312 64.5985 120.816 64.5985 120.24C64.5985 119.664 64.4918 119.168 64.2785 118.752C64.0652 118.336 63.7665 118.016 63.3825 117.792C63.0092 117.568 62.5772 117.456 62.0865 117.456C61.5958 117.456 61.1585 117.568 60.7745 117.792C60.4012 118.016 60.1078 118.336 59.8945 118.752C59.6812 119.168 59.5745 119.664 59.5745 120.24C59.5745 120.816 59.6812 121.312 59.8945 121.728C60.1078 122.144 60.4012 122.464 60.7745 122.688C61.1585 122.912 61.5958 123.024 62.0865 123.024ZM67.885 127.008C67.5757 127.008 67.2663 126.965 66.957 126.88C66.6583 126.805 66.3917 126.699 66.157 126.56L66.541 125.536C66.7757 125.653 66.9997 125.739 67.213 125.792C67.4263 125.856 67.6237 125.888 67.805 125.888C68.0397 125.888 68.2637 125.829 68.477 125.712C68.6903 125.605 68.8983 125.424 69.101 125.168C69.3037 124.923 69.5063 124.592 69.709 124.176L66.573 116.48H67.965L70.349 122.64L72.733 116.48H74.125L71.053 124C70.733 124.789 70.4023 125.403 70.061 125.84C69.7197 126.277 69.3677 126.581 69.005 126.752C68.6423 126.923 68.269 127.008 67.885 127.008ZM82.372 124.16C81.796 124.16 81.2627 124.075 80.772 123.904C80.2813 123.723 79.8013 123.461 79.332 123.12L79.924 122.064C80.3827 122.384 80.804 122.624 81.188 122.784C81.5827 122.944 81.9827 123.024 82.388 123.024C82.9853 123.024 83.4333 122.933 83.732 122.752C84.0307 122.56 84.18 122.283 84.18 121.92C84.18 121.621 84.0893 121.403 83.908 121.264C83.7373 121.115 83.428 120.997 82.98 120.912L81.62 120.656C80.9373 120.528 80.4253 120.299 80.084 119.968C79.7427 119.637 79.572 119.211 79.572 118.688C79.572 118.261 79.6787 117.872 79.892 117.52C80.116 117.157 80.4413 116.869 80.868 116.656C81.2947 116.432 81.828 116.32 82.468 116.32C83.012 116.32 83.5187 116.405 83.988 116.576C84.468 116.736 84.8947 116.955 85.268 117.232L84.692 118.256C84.372 118.021 84.0307 117.829 83.668 117.68C83.3053 117.531 82.9213 117.456 82.516 117.456C82.0147 117.456 81.62 117.547 81.332 117.728C81.044 117.899 80.9 118.171 80.9 118.544C80.9 118.789 80.9853 118.981 81.156 119.12C81.3267 119.259 81.6147 119.365 82.02 119.44L83.38 119.696C84.0627 119.824 84.5853 120.048 84.948 120.368C85.3213 120.688 85.508 121.163 85.508 121.792C85.508 122.485 85.2413 123.056 84.708 123.504C84.1747 123.941 83.396 124.16 82.372 124.16ZM91.1118 124.16C90.3651 124.16 89.6931 124.005 89.0958 123.696C88.4984 123.387 88.0291 122.944 87.6878 122.368C87.3464 121.781 87.1758 121.072 87.1758 120.24C87.1758 119.44 87.3411 118.747 87.6718 118.16C88.0024 117.573 88.4504 117.12 89.0158 116.8C89.5811 116.48 90.2104 116.32 90.9038 116.32C91.6398 116.32 92.2744 116.464 92.8078 116.752C93.3411 117.04 93.7518 117.429 94.0398 117.92C94.3278 118.4 94.4718 118.949 94.4718 119.568C94.4718 119.739 94.4451 119.931 94.3918 120.144C94.3491 120.347 94.2904 120.512 94.2158 120.64H88.5038C88.5571 121.152 88.6958 121.589 88.9198 121.952C89.1544 122.304 89.4691 122.571 89.8638 122.752C90.2584 122.933 90.7118 123.024 91.2238 123.024C91.7251 123.024 92.1624 122.949 92.5358 122.8C92.9198 122.64 93.2878 122.416 93.6398 122.128L94.1518 123.104C93.7464 123.456 93.2878 123.723 92.7758 123.904C92.2638 124.075 91.7091 124.16 91.1118 124.16ZM88.5038 119.552H93.1278C93.1384 119.531 93.1438 119.509 93.1438 119.488C93.1438 119.467 93.1438 119.435 93.1438 119.392C93.1438 119.008 93.0638 118.672 92.9038 118.384C92.7438 118.085 92.4984 117.856 92.1678 117.696C91.8478 117.536 91.4424 117.456 90.9518 117.456C90.5678 117.456 90.2051 117.541 89.8638 117.712C89.5224 117.872 89.2344 118.107 88.9998 118.416C88.7651 118.725 88.5998 119.104 88.5038 119.552ZM98.9609 124.16C98.3849 124.16 97.8835 124.075 97.4569 123.904C97.0409 123.723 96.7155 123.467 96.4809 123.136C96.2462 122.795 96.1289 122.389 96.1289 121.92C96.1289 121.451 96.2462 121.056 96.4809 120.736C96.7155 120.416 97.0462 120.165 97.4729 119.984C97.8995 119.792 98.3955 119.664 98.9609 119.6L101.681 119.264C101.617 118.645 101.393 118.192 101.009 117.904C100.636 117.605 100.156 117.456 99.5689 117.456C99.2062 117.456 98.8275 117.536 98.4329 117.696C98.0382 117.845 97.6275 118.075 97.2009 118.384L96.6729 117.392C97.0675 117.061 97.5102 116.8 98.0009 116.608C98.5022 116.416 99.0249 116.32 99.5689 116.32C100.7 116.32 101.553 116.581 102.129 117.104C102.705 117.627 102.993 118.4 102.993 119.424V124H101.745V122.832C101.468 123.28 101.089 123.616 100.609 123.84C100.129 124.053 99.5795 124.16 98.9609 124.16ZM99.2009 123.024C99.7449 123.024 100.204 122.917 100.577 122.704C100.95 122.48 101.228 122.192 101.409 121.84C101.601 121.477 101.697 121.099 101.697 120.704V120.336L99.2969 120.64C98.6995 120.715 98.2409 120.843 97.9209 121.024C97.6115 121.195 97.4569 121.483 97.4569 121.888C97.4569 122.251 97.6115 122.533 97.9209 122.736C98.2302 122.928 98.6569 123.024 99.2009 123.024ZM105.514 124V116.48H106.762V117.856C106.954 117.376 107.237 117.013 107.61 116.768C107.994 116.512 108.426 116.384 108.906 116.384C109.055 116.384 109.189 116.395 109.306 116.416C109.434 116.427 109.535 116.448 109.61 116.48V117.696C109.471 117.664 109.333 117.643 109.194 117.632C109.055 117.611 108.917 117.6 108.778 117.6C108.213 117.6 107.743 117.845 107.37 118.336C106.997 118.816 106.81 119.493 106.81 120.368V124H105.514ZM114.329 124.16C113.572 124.16 112.9 124 112.313 123.68C111.727 123.349 111.268 122.891 110.937 122.304C110.607 121.717 110.441 121.029 110.441 120.24C110.441 119.451 110.607 118.763 110.937 118.176C111.268 117.589 111.727 117.136 112.313 116.816C112.9 116.485 113.572 116.32 114.329 116.32C114.873 116.32 115.364 116.4 115.801 116.56C116.249 116.72 116.644 116.949 116.985 117.248L116.489 118.224C116.148 117.957 115.791 117.765 115.417 117.648C115.044 117.52 114.681 117.456 114.329 117.456C113.817 117.456 113.369 117.568 112.985 117.792C112.601 118.016 112.303 118.336 112.089 118.752C111.876 119.168 111.769 119.664 111.769 120.24C111.769 120.816 111.876 121.312 112.089 121.728C112.303 122.144 112.601 122.464 112.985 122.688C113.369 122.912 113.817 123.024 114.329 123.024C114.681 123.024 115.044 122.965 115.417 122.848C115.791 122.72 116.148 122.523 116.489 122.256L116.985 123.232C116.644 123.531 116.249 123.76 115.801 123.92C115.364 124.08 114.873 124.16 114.329 124.16ZM118.998 124V113.312H120.294V117.584C120.529 117.189 120.854 116.88 121.27 116.656C121.697 116.432 122.214 116.32 122.822 116.32C123.686 116.32 124.364 116.565 124.854 117.056C125.345 117.547 125.59 118.32 125.59 119.376V124H124.294V119.52C124.294 118.795 124.145 118.272 123.846 117.952C123.558 117.621 123.11 117.456 122.502 117.456C121.798 117.456 121.254 117.701 120.87 118.192C120.486 118.672 120.294 119.328 120.294 120.16V124H118.998ZM128.123 124V116.48H129.419V124H128.123ZM128.763 114.816C128.529 114.816 128.337 114.747 128.187 114.608C128.038 114.459 127.963 114.272 127.963 114.048C127.963 113.824 128.038 113.643 128.187 113.504C128.337 113.365 128.529 113.296 128.763 113.296C129.009 113.296 129.206 113.365 129.355 113.504C129.505 113.643 129.579 113.824 129.579 114.048C129.579 114.272 129.505 114.459 129.355 114.608C129.206 114.747 129.009 114.816 128.763 114.816ZM131.952 124V116.48H133.2V117.664C133.424 117.248 133.754 116.923 134.192 116.688C134.629 116.443 135.157 116.32 135.776 116.32C136.64 116.32 137.317 116.565 137.808 117.056C138.298 117.547 138.544 118.32 138.544 119.376V124H137.248V119.52C137.248 118.795 137.098 118.272 136.8 117.952C136.512 117.621 136.064 117.456 135.456 117.456C134.752 117.456 134.208 117.701 133.824 118.192C133.44 118.672 133.248 119.328 133.248 120.16V124H131.952ZM144.309 127.072C143.701 127.072 143.125 126.976 142.581 126.784C142.037 126.592 141.525 126.277 141.045 125.84L141.541 124.88C142.021 125.275 142.479 125.547 142.917 125.696C143.354 125.856 143.797 125.936 144.245 125.936C145.098 125.936 145.765 125.696 146.245 125.216C146.725 124.747 146.965 124.059 146.965 123.152V122.416C146.719 122.779 146.367 123.083 145.909 123.328C145.45 123.563 144.901 123.68 144.261 123.68C143.61 123.68 143.007 123.536 142.453 123.248C141.909 122.96 141.471 122.544 141.141 122C140.821 121.445 140.661 120.779 140.661 120C140.661 119.221 140.821 118.56 141.141 118.016C141.471 117.461 141.909 117.04 142.453 116.752C143.007 116.464 143.61 116.32 144.261 116.32C144.922 116.32 145.487 116.453 145.957 116.72C146.426 116.976 146.778 117.291 147.013 117.664V116.48H148.26V122.96C148.26 123.835 148.101 124.576 147.781 125.184C147.471 125.803 147.023 126.272 146.437 126.592C145.85 126.912 145.141 127.072 144.309 127.072ZM144.501 122.544C144.959 122.544 145.375 122.448 145.749 122.256C146.122 122.064 146.421 121.781 146.645 121.408C146.879 121.024 146.997 120.555 146.997 120C146.997 119.445 146.879 118.981 146.645 118.608C146.421 118.224 146.122 117.936 145.749 117.744C145.375 117.552 144.959 117.456 144.501 117.456C144.053 117.456 143.637 117.552 143.253 117.744C142.879 117.936 142.575 118.224 142.341 118.608C142.106 118.981 141.989 119.445 141.989 120C141.989 120.555 142.106 121.024 142.341 121.408C142.575 121.781 142.879 122.064 143.253 122.256C143.637 122.448 144.053 122.544 144.501 122.544ZM158.702 124.16C158.062 124.16 157.502 124.032 157.022 123.776C156.542 123.509 156.184 123.163 155.95 122.736V124H154.702V113.312H155.998V117.664C156.243 117.259 156.6 116.933 157.07 116.688C157.539 116.443 158.083 116.32 158.702 116.32C159.395 116.32 160.014 116.48 160.558 116.8C161.102 117.12 161.528 117.573 161.838 118.16C162.147 118.736 162.302 119.429 162.302 120.24C162.302 121.04 162.147 121.733 161.838 122.32C161.528 122.907 161.102 123.36 160.558 123.68C160.014 124 159.395 124.16 158.702 124.16ZM158.462 123.024C158.952 123.024 159.384 122.912 159.758 122.688C160.142 122.464 160.44 122.144 160.654 121.728C160.867 121.312 160.974 120.816 160.974 120.24C160.974 119.664 160.867 119.168 160.654 118.752C160.44 118.336 160.142 118.016 159.758 117.792C159.384 117.568 158.952 117.456 158.462 117.456C157.971 117.456 157.534 117.568 157.15 117.792C156.776 118.016 156.483 118.336 156.27 118.752C156.056 119.168 155.95 119.664 155.95 120.24C155.95 120.816 156.056 121.312 156.27 121.728C156.483 122.144 156.776 122.464 157.15 122.688C157.534 122.912 157.971 123.024 158.462 123.024ZM166.82 124.16C166.244 124.16 165.743 124.075 165.316 123.904C164.9 123.723 164.575 123.467 164.34 123.136C164.106 122.795 163.988 122.389 163.988 121.92C163.988 121.451 164.106 121.056 164.34 120.736C164.575 120.416 164.906 120.165 165.332 119.984C165.759 119.792 166.255 119.664 166.82 119.6L169.54 119.264C169.476 118.645 169.252 118.192 168.868 117.904C168.495 117.605 168.015 117.456 167.428 117.456C167.066 117.456 166.687 117.536 166.292 117.696C165.898 117.845 165.487 118.075 165.06 118.384L164.532 117.392C164.927 117.061 165.37 116.8 165.86 116.608C166.362 116.416 166.884 116.32 167.428 116.32C168.559 116.32 169.412 116.581 169.988 117.104C170.564 117.627 170.852 118.4 170.852 119.424V124H169.604V122.832C169.327 123.28 168.948 123.616 168.468 123.84C167.988 124.053 167.439 124.16 166.82 124.16ZM167.06 123.024C167.604 123.024 168.063 122.917 168.436 122.704C168.81 122.48 169.087 122.192 169.268 121.84C169.46 121.477 169.556 121.099 169.556 120.704V120.336L167.156 120.64C166.559 120.715 166.1 120.843 165.78 121.024C165.471 121.195 165.316 121.483 165.316 121.888C165.316 122.251 165.471 122.533 165.78 122.736C166.09 122.928 166.516 123.024 167.06 123.024ZM173.373 124V116.48H174.621V117.856C174.813 117.376 175.096 117.013 175.469 116.768C175.853 116.512 176.285 116.384 176.765 116.384C176.915 116.384 177.048 116.395 177.165 116.416C177.293 116.427 177.395 116.448 177.469 116.48V117.696C177.331 117.664 177.192 117.643 177.053 117.632C176.915 117.611 176.776 117.6 176.637 117.6C176.072 117.6 175.603 117.845 175.229 118.336C174.856 118.816 174.669 119.493 174.669 120.368V124H173.373Z"
      fill="#E9F456"
    />
    <defs>
      <linearGradient id="paint0_linear_397_842" x1="107.5" y1="68" x2="107.5" y2="151" gradientUnits="userSpaceOnUse">
        <stop stop-color="#EEF3BC" />
        <stop offset="1" stop-color="#EAF45A" />
      </linearGradient>
      <linearGradient
        id="paint1_linear_397_842"
        x1="112.007"
        y1="4.22823"
        x2="97.0032"
        y2="57.1425"
        gradientUnits="userSpaceOnUse"
      >
        <stop stop-color="#EEF3BC" />
        <stop offset="1" stop-color="#EAF45A" />
      </linearGradient>
    </defs>
  </svg>
);

const trendsTip = (
  <svg width="226" height="154" viewBox="0 0 226 154" fill="none" xmlns="http://www.w3.org/2000/svg">
    <rect x="1" y="1" width="224" height="83" rx="16" stroke="url(#paint0_linear_397_843)" stroke-dasharray="2 2" />
    <path
      d="M59.6894 29V19.528H56.3294V18.312H64.4094V19.528H61.0654V29H59.6894ZM64.8109 29V21.48H66.0589V22.856C66.2509 22.376 66.5335 22.0133 66.9069 21.768C67.2909 21.512 67.7229 21.384 68.2029 21.384C68.3522 21.384 68.4855 21.3947 68.6029 21.416C68.7309 21.4267 68.8322 21.448 68.9069 21.48V22.696C68.7682 22.664 68.6295 22.6427 68.4909 22.632C68.3522 22.6107 68.2135 22.6 68.0749 22.6C67.5095 22.6 67.0402 22.8453 66.6669 23.336C66.2935 23.816 66.1069 24.4933 66.1069 25.368V29H64.8109ZM71.1975 32.008C70.8882 32.008 70.5788 31.9653 70.2695 31.88C69.9708 31.8053 69.7042 31.6987 69.4695 31.56L69.8535 30.536C70.0882 30.6533 70.3122 30.7387 70.5255 30.792C70.7388 30.856 70.9362 30.888 71.1175 30.888C71.3522 30.888 71.5762 30.8293 71.7895 30.712C72.0028 30.6053 72.2108 30.424 72.4135 30.168C72.6162 29.9227 72.8188 29.592 73.0215 29.176L69.8855 21.48H71.2775L73.6615 27.64L76.0455 21.48H77.4375L74.3655 29C74.0455 29.7893 73.7148 30.4027 73.3735 30.84C73.0322 31.2773 72.6802 31.5813 72.3175 31.752C71.9548 31.9227 71.5815 32.008 71.1975 32.008ZM88.9645 31.912V27.816C88.7192 28.2213 88.3618 28.5467 87.8925 28.792C87.4232 29.0373 86.8792 29.16 86.2605 29.16C85.5672 29.16 84.9485 29 84.4045 28.68C83.8605 28.36 83.4338 27.9067 83.1245 27.32C82.8152 26.7333 82.6605 26.04 82.6605 25.24C82.6605 24.4293 82.8152 23.736 83.1245 23.16C83.4338 22.5733 83.8605 22.12 84.4045 21.8C84.9485 21.48 85.5672 21.32 86.2605 21.32C86.9005 21.32 87.4605 21.4533 87.9405 21.72C88.4205 21.976 88.7778 22.3173 89.0125 22.744V21.48H90.2605V31.912H88.9645ZM86.5005 28.024C86.9912 28.024 87.4232 27.912 87.7965 27.688C88.1805 27.464 88.4792 27.144 88.6925 26.728C88.9058 26.312 89.0125 25.816 89.0125 25.24C89.0125 24.664 88.9058 24.168 88.6925 23.752C88.4792 23.336 88.1805 23.016 87.7965 22.792C87.4232 22.568 86.9912 22.456 86.5005 22.456C86.0098 22.456 85.5725 22.568 85.1885 22.792C84.8152 23.016 84.5218 23.336 84.3085 23.752C84.0952 24.168 83.9885 24.664 83.9885 25.24C83.9885 25.816 84.0952 26.312 84.3085 26.728C84.5218 27.144 84.8152 27.464 85.1885 27.688C85.5725 27.912 86.0098 28.024 86.5005 28.024ZM95.5633 29.16C94.6993 29.16 94.0219 28.9147 93.5312 28.424C93.0406 27.9333 92.7953 27.16 92.7953 26.104V21.48H94.0913V25.96C94.0913 26.6853 94.2353 27.2133 94.5233 27.544C94.8219 27.864 95.2753 28.024 95.8833 28.024C96.5873 28.024 97.1313 27.784 97.5153 27.304C97.8993 26.8133 98.0913 26.152 98.0913 25.32V21.48H99.3873V29H98.1393V27.816C97.9153 28.232 97.5846 28.5627 97.1473 28.808C96.7099 29.0427 96.1819 29.16 95.5633 29.16ZM105.424 29.16C104.678 29.16 104.006 29.0053 103.408 28.696C102.811 28.3867 102.342 27.944 102 27.368C101.659 26.7813 101.488 26.072 101.488 25.24C101.488 24.44 101.654 23.7467 101.984 23.16C102.315 22.5733 102.763 22.12 103.328 21.8C103.894 21.48 104.523 21.32 105.216 21.32C105.952 21.32 106.587 21.464 107.12 21.752C107.654 22.04 108.064 22.4293 108.352 22.92C108.64 23.4 108.784 23.9493 108.784 24.568C108.784 24.7387 108.758 24.9307 108.704 25.144C108.662 25.3467 108.603 25.512 108.528 25.64H102.816C102.87 26.152 103.008 26.5893 103.232 26.952C103.467 27.304 103.782 27.5707 104.176 27.752C104.571 27.9333 105.024 28.024 105.536 28.024C106.038 28.024 106.475 27.9493 106.848 27.8C107.232 27.64 107.6 27.416 107.952 27.128L108.464 28.104C108.059 28.456 107.6 28.7227 107.088 28.904C106.576 29.0747 106.022 29.16 105.424 29.16ZM102.816 24.552H107.44C107.451 24.5307 107.456 24.5093 107.456 24.488C107.456 24.4667 107.456 24.4347 107.456 24.392C107.456 24.008 107.376 23.672 107.216 23.384C107.056 23.0853 106.811 22.856 106.48 22.696C106.16 22.536 105.755 22.456 105.264 22.456C104.88 22.456 104.518 22.5413 104.176 22.712C103.835 22.872 103.547 23.1067 103.312 23.416C103.078 23.7253 102.912 24.104 102.816 24.552ZM113.481 29.16C112.905 29.16 112.372 29.0747 111.881 28.904C111.391 28.7227 110.911 28.4613 110.441 28.12L111.033 27.064C111.492 27.384 111.913 27.624 112.297 27.784C112.692 27.944 113.092 28.024 113.497 28.024C114.095 28.024 114.543 27.9333 114.841 27.752C115.14 27.56 115.289 27.2827 115.289 26.92C115.289 26.6213 115.199 26.4027 115.017 26.264C114.847 26.1147 114.537 25.9973 114.089 25.912L112.729 25.656C112.047 25.528 111.535 25.2987 111.193 24.968C110.852 24.6373 110.681 24.2107 110.681 23.688C110.681 23.2613 110.788 22.872 111.001 22.52C111.225 22.1573 111.551 21.8693 111.977 21.656C112.404 21.432 112.937 21.32 113.577 21.32C114.121 21.32 114.628 21.4053 115.097 21.576C115.577 21.736 116.004 21.9547 116.377 22.232L115.801 23.256C115.481 23.0213 115.14 22.8293 114.777 22.68C114.415 22.5307 114.031 22.456 113.625 22.456C113.124 22.456 112.729 22.5467 112.441 22.728C112.153 22.8987 112.009 23.1707 112.009 23.544C112.009 23.7893 112.095 23.9813 112.265 24.12C112.436 24.2587 112.724 24.3653 113.129 24.44L114.489 24.696C115.172 24.824 115.695 25.048 116.057 25.368C116.431 25.688 116.617 26.1627 116.617 26.792C116.617 27.4853 116.351 28.056 115.817 28.504C115.284 28.9413 114.505 29.16 113.481 29.16ZM121.757 29.096C121.01 29.096 120.45 28.92 120.077 28.568C119.714 28.2053 119.533 27.6453 119.533 26.888V22.6H117.853V21.48H119.533V19.336H120.829V21.48H122.813V22.6H120.829V26.792C120.829 27.1867 120.925 27.4853 121.117 27.688C121.309 27.88 121.602 27.976 121.997 27.976C122.125 27.976 122.269 27.9707 122.429 27.96C122.589 27.9493 122.717 27.9333 122.813 27.912V28.968C122.696 29.0107 122.536 29.0427 122.333 29.064C122.141 29.0853 121.949 29.096 121.757 29.096ZM131.679 29.096C130.932 29.096 130.372 28.92 129.999 28.568C129.636 28.2053 129.455 27.6453 129.455 26.888V22.6H127.775V21.48H129.455V19.336H130.751V21.48H132.735V22.6H130.751V26.792C130.751 27.1867 130.847 27.4853 131.039 27.688C131.231 27.88 131.524 27.976 131.919 27.976C132.047 27.976 132.191 27.9707 132.351 27.96C132.511 27.9493 132.639 27.9333 132.735 27.912V28.968C132.618 29.0107 132.458 29.0427 132.255 29.064C132.063 29.0853 131.871 29.096 131.679 29.096ZM134.655 29V21.48H135.903V22.856C136.095 22.376 136.377 22.0133 136.751 21.768C137.135 21.512 137.567 21.384 138.047 21.384C138.196 21.384 138.329 21.3947 138.447 21.416C138.575 21.4267 138.676 21.448 138.751 21.48V22.696C138.612 22.664 138.473 22.6427 138.335 22.632C138.196 22.6107 138.057 22.6 137.919 22.6C137.353 22.6 136.884 22.8453 136.511 23.336C136.137 23.816 135.951 24.4933 135.951 25.368V29H134.655ZM143.518 29.16C142.771 29.16 142.099 29.0053 141.502 28.696C140.905 28.3867 140.435 27.944 140.094 27.368C139.753 26.7813 139.582 26.072 139.582 25.24C139.582 24.44 139.747 23.7467 140.078 23.16C140.409 22.5733 140.857 22.12 141.422 21.8C141.987 21.48 142.617 21.32 143.31 21.32C144.046 21.32 144.681 21.464 145.214 21.752C145.747 22.04 146.158 22.4293 146.446 22.92C146.734 23.4 146.878 23.9493 146.878 24.568C146.878 24.7387 146.851 24.9307 146.798 25.144C146.755 25.3467 146.697 25.512 146.622 25.64H140.91C140.963 26.152 141.102 26.5893 141.326 26.952C141.561 27.304 141.875 27.5707 142.27 27.752C142.665 27.9333 143.118 28.024 143.63 28.024C144.131 28.024 144.569 27.9493 144.942 27.8C145.326 27.64 145.694 27.416 146.046 27.128L146.558 28.104C146.153 28.456 145.694 28.7227 145.182 28.904C144.67 29.0747 144.115 29.16 143.518 29.16ZM140.91 24.552H145.534C145.545 24.5307 145.55 24.5093 145.55 24.488C145.55 24.4667 145.55 24.4347 145.55 24.392C145.55 24.008 145.47 23.672 145.31 23.384C145.15 23.0853 144.905 22.856 144.574 22.696C144.254 22.536 143.849 22.456 143.358 22.456C142.974 22.456 142.611 22.5413 142.27 22.712C141.929 22.872 141.641 23.1067 141.406 23.416C141.171 23.7253 141.006 24.104 140.91 24.552ZM148.967 29V21.48H150.215V22.664C150.439 22.248 150.77 21.9227 151.207 21.688C151.644 21.4427 152.172 21.32 152.791 21.32C153.655 21.32 154.332 21.5653 154.823 22.056C155.314 22.5467 155.559 23.32 155.559 24.376V29H154.263V24.52C154.263 23.7947 154.114 23.272 153.815 22.952C153.527 22.6213 153.079 22.456 152.471 22.456C151.767 22.456 151.223 22.7013 150.839 23.192C150.455 23.672 150.263 24.328 150.263 25.16V29H148.967ZM161.276 29.16C160.583 29.16 159.964 29 159.42 28.68C158.876 28.36 158.449 27.9067 158.14 27.32C157.831 26.7333 157.676 26.04 157.676 25.24C157.676 24.4293 157.831 23.736 158.14 23.16C158.449 22.5733 158.876 22.12 159.42 21.8C159.964 21.48 160.583 21.32 161.276 21.32C161.895 21.32 162.439 21.4427 162.908 21.688C163.377 21.9333 163.735 22.2587 163.98 22.664V18.312H165.276V29H164.028V27.736C163.793 28.1627 163.436 28.5093 162.956 28.776C162.476 29.032 161.916 29.16 161.276 29.16ZM161.516 28.024C162.007 28.024 162.439 27.912 162.812 27.688C163.196 27.464 163.495 27.144 163.708 26.728C163.921 26.312 164.028 25.816 164.028 25.24C164.028 24.664 163.921 24.168 163.708 23.752C163.495 23.336 163.196 23.016 162.812 22.792C162.439 22.568 162.007 22.456 161.516 22.456C161.025 22.456 160.588 22.568 160.204 22.792C159.831 23.016 159.537 23.336 159.324 23.752C159.111 24.168 159.004 24.664 159.004 25.24C159.004 25.816 159.111 26.312 159.324 26.728C159.537 27.144 159.831 27.464 160.204 27.688C160.588 27.912 161.025 28.024 161.516 28.024ZM170.419 29.16C169.843 29.16 169.31 29.0747 168.819 28.904C168.328 28.7227 167.848 28.4613 167.379 28.12L167.971 27.064C168.43 27.384 168.851 27.624 169.235 27.784C169.63 27.944 170.03 28.024 170.435 28.024C171.032 28.024 171.48 27.9333 171.779 27.752C172.078 27.56 172.227 27.2827 172.227 26.92C172.227 26.6213 172.136 26.4027 171.955 26.264C171.784 26.1147 171.475 25.9973 171.027 25.912L169.667 25.656C168.984 25.528 168.472 25.2987 168.131 24.968C167.79 24.6373 167.619 24.2107 167.619 23.688C167.619 23.2613 167.726 22.872 167.939 22.52C168.163 22.1573 168.488 21.8693 168.915 21.656C169.342 21.432 169.875 21.32 170.515 21.32C171.059 21.32 171.566 21.4053 172.035 21.576C172.515 21.736 172.942 21.9547 173.315 22.232L172.739 23.256C172.419 23.0213 172.078 22.8293 171.715 22.68C171.352 22.5307 170.968 22.456 170.563 22.456C170.062 22.456 169.667 22.5467 169.379 22.728C169.091 22.8987 168.947 23.1707 168.947 23.544C168.947 23.7893 169.032 23.9813 169.203 24.12C169.374 24.2587 169.662 24.3653 170.067 24.44L171.427 24.696C172.11 24.824 172.632 25.048 172.995 25.368C173.368 25.688 173.555 26.1627 173.555 26.792C173.555 27.4853 173.288 28.056 172.755 28.504C172.222 28.9413 171.443 29.16 170.419 29.16ZM37.1825 48L34.5105 40.48H35.9025L37.8225 46.368L39.8225 40.48H41.0705L43.0545 46.368L44.9905 40.48H46.3825L43.7105 48H42.4465L40.4465 42.112L38.4465 48H37.1825ZM48.1078 48V37.312H49.4038V41.584C49.6384 41.1893 49.9638 40.88 50.3798 40.656C50.8064 40.432 51.3238 40.32 51.9318 40.32C52.7958 40.32 53.4731 40.5653 53.9638 41.056C54.4544 41.5467 54.6998 42.32 54.6998 43.376V48H53.4038V43.52C53.4038 42.7947 53.2544 42.272 52.9558 41.952C52.6678 41.6213 52.2198 41.456 51.6118 41.456C50.9078 41.456 50.3638 41.7013 49.9798 42.192C49.5958 42.672 49.4038 43.328 49.4038 44.16V48H48.1078ZM57.2328 48V40.48H58.5288V48H57.2328ZM57.8728 38.816C57.6381 38.816 57.4461 38.7467 57.2968 38.608C57.1474 38.4587 57.0728 38.272 57.0728 38.048C57.0728 37.824 57.1474 37.6427 57.2968 37.504C57.4461 37.3653 57.6381 37.296 57.8728 37.296C58.1181 37.296 58.3154 37.3653 58.4648 37.504C58.6141 37.6427 58.6888 37.824 58.6888 38.048C58.6888 38.272 58.6141 38.4587 58.4648 38.608C58.3154 38.7467 58.1181 38.816 57.8728 38.816ZM64.5169 48.16C63.7595 48.16 63.0875 48 62.5009 47.68C61.9142 47.3493 61.4555 46.8907 61.1249 46.304C60.7942 45.7173 60.6289 45.0293 60.6289 44.24C60.6289 43.4507 60.7942 42.7627 61.1249 42.176C61.4555 41.5893 61.9142 41.136 62.5009 40.816C63.0875 40.4853 63.7595 40.32 64.5169 40.32C65.0609 40.32 65.5515 40.4 65.9889 40.56C66.4369 40.72 66.8315 40.9493 67.1729 41.248L66.6769 42.224C66.3355 41.9573 65.9782 41.7653 65.6049 41.648C65.2315 41.52 64.8689 41.456 64.5169 41.456C64.0049 41.456 63.5569 41.568 63.1729 41.792C62.7889 42.016 62.4902 42.336 62.2769 42.752C62.0635 43.168 61.9569 43.664 61.9569 44.24C61.9569 44.816 62.0635 45.312 62.2769 45.728C62.4902 46.144 62.7889 46.464 63.1729 46.688C63.5569 46.912 64.0049 47.024 64.5169 47.024C64.8689 47.024 65.2315 46.9653 65.6049 46.848C65.9782 46.72 66.3355 46.5227 66.6769 46.256L67.1729 47.232C66.8315 47.5307 66.4369 47.76 65.9889 47.92C65.5515 48.08 65.0609 48.16 64.5169 48.16ZM69.1859 48V37.312H70.4819V41.584C70.7165 41.1893 71.0419 40.88 71.4579 40.656C71.8845 40.432 72.4019 40.32 73.0099 40.32C73.8739 40.32 74.5512 40.5653 75.0419 41.056C75.5325 41.5467 75.7779 42.32 75.7779 43.376V48H74.4819V43.52C74.4819 42.7947 74.3325 42.272 74.0339 41.952C73.7459 41.6213 73.2979 41.456 72.6899 41.456C71.9859 41.456 71.4419 41.7013 71.0579 42.192C70.6739 42.672 70.4819 43.328 70.4819 44.16V48H69.1859ZM84.6171 48.16C84.0411 48.16 83.5398 48.0747 83.1131 47.904C82.6971 47.7227 82.3718 47.4667 82.1371 47.136C81.9025 46.7947 81.7851 46.3893 81.7851 45.92C81.7851 45.4507 81.9025 45.056 82.1371 44.736C82.3718 44.416 82.7025 44.1653 83.1291 43.984C83.5558 43.792 84.0518 43.664 84.6171 43.6L87.3371 43.264C87.2731 42.6453 87.0491 42.192 86.6651 41.904C86.2918 41.6053 85.8118 41.456 85.2251 41.456C84.8625 41.456 84.4838 41.536 84.0891 41.696C83.6945 41.8453 83.2838 42.0747 82.8571 42.384L82.3291 41.392C82.7238 41.0613 83.1665 40.8 83.6571 40.608C84.1585 40.416 84.6811 40.32 85.2251 40.32C86.3558 40.32 87.2091 40.5813 87.7851 41.104C88.3611 41.6267 88.6491 42.4 88.6491 43.424V48H87.4011V46.832C87.1238 47.28 86.7451 47.616 86.2651 47.84C85.7851 48.0533 85.2358 48.16 84.6171 48.16ZM84.8571 47.024C85.4011 47.024 85.8598 46.9173 86.2331 46.704C86.6065 46.48 86.8838 46.192 87.0651 45.84C87.2571 45.4773 87.3531 45.0987 87.3531 44.704V44.336L84.9531 44.64C84.3558 44.7147 83.8971 44.8427 83.5771 45.024C83.2678 45.1947 83.1131 45.4827 83.1131 45.888C83.1131 46.2507 83.2678 46.5333 83.5771 46.736C83.8865 46.928 84.3131 47.024 84.8571 47.024ZM91.1703 48V40.48H92.4183V41.856C92.6103 41.376 92.8929 41.0133 93.2663 40.768C93.6503 40.512 94.0823 40.384 94.5623 40.384C94.7116 40.384 94.8449 40.3947 94.9623 40.416C95.0903 40.4267 95.1916 40.448 95.2663 40.48V41.696C95.1276 41.664 94.9889 41.6427 94.8503 41.632C94.7116 41.6107 94.5729 41.6 94.4343 41.6C93.8689 41.6 93.3996 41.8453 93.0263 42.336C92.6529 42.816 92.4663 43.4933 92.4663 44.368V48H91.1703ZM100.034 48.16C99.287 48.16 98.615 48.0053 98.0176 47.696C97.4203 47.3867 96.951 46.944 96.6096 46.368C96.2683 45.7813 96.0976 45.072 96.0976 44.24C96.0976 43.44 96.263 42.7467 96.5936 42.16C96.9243 41.5733 97.3723 41.12 97.9376 40.8C98.503 40.48 99.1323 40.32 99.8256 40.32C100.562 40.32 101.196 40.464 101.73 40.752C102.263 41.04 102.674 41.4293 102.962 41.92C103.25 42.4 103.394 42.9493 103.394 43.568C103.394 43.7387 103.367 43.9307 103.314 44.144C103.271 44.3467 103.212 44.512 103.138 44.64H97.4256C97.479 45.152 97.6176 45.5893 97.8416 45.952C98.0763 46.304 98.391 46.5707 98.7856 46.752C99.1803 46.9333 99.6336 47.024 100.146 47.024C100.647 47.024 101.084 46.9493 101.458 46.8C101.842 46.64 102.21 46.416 102.562 46.128L103.074 47.104C102.668 47.456 102.21 47.7227 101.698 47.904C101.186 48.0747 100.631 48.16 100.034 48.16ZM97.4256 43.552H102.05C102.06 43.5307 102.066 43.5093 102.066 43.488C102.066 43.4667 102.066 43.4347 102.066 43.392C102.066 43.008 101.986 42.672 101.826 42.384C101.666 42.0853 101.42 41.856 101.09 41.696C100.77 41.536 100.364 41.456 99.8736 41.456C99.4896 41.456 99.127 41.5413 98.7856 41.712C98.4443 41.872 98.1563 42.1067 97.9216 42.416C97.687 42.7253 97.5216 43.104 97.4256 43.552ZM112.893 48.16C112.146 48.16 111.474 48.0053 110.877 47.696C110.28 47.3867 109.81 46.944 109.469 46.368C109.128 45.7813 108.957 45.072 108.957 44.24C108.957 43.44 109.122 42.7467 109.453 42.16C109.784 41.5733 110.232 41.12 110.797 40.8C111.362 40.48 111.992 40.32 112.685 40.32C113.421 40.32 114.056 40.464 114.589 40.752C115.122 41.04 115.533 41.4293 115.821 41.92C116.109 42.4 116.253 42.9493 116.253 43.568C116.253 43.7387 116.226 43.9307 116.173 44.144C116.13 44.3467 116.072 44.512 115.997 44.64H110.285C110.338 45.152 110.477 45.5893 110.701 45.952C110.936 46.304 111.25 46.5707 111.645 46.752C112.04 46.9333 112.493 47.024 113.005 47.024C113.506 47.024 113.944 46.9493 114.317 46.8C114.701 46.64 115.069 46.416 115.421 46.128L115.933 47.104C115.528 47.456 115.069 47.7227 114.557 47.904C114.045 48.0747 113.49 48.16 112.893 48.16ZM110.285 43.552H114.909C114.92 43.5307 114.925 43.5093 114.925 43.488C114.925 43.4667 114.925 43.4347 114.925 43.392C114.925 43.008 114.845 42.672 114.685 42.384C114.525 42.0853 114.28 41.856 113.949 41.696C113.629 41.536 113.224 41.456 112.733 41.456C112.349 41.456 111.986 41.5413 111.645 41.712C111.304 41.872 111.016 42.1067 110.781 42.416C110.546 42.7253 110.381 43.104 110.285 43.552ZM116.557 48L119.501 44.112L116.717 40.48H118.237L120.333 43.296L122.429 40.48H123.949L121.165 44.112L124.109 48H122.589L120.333 45.008L118.077 48H116.557ZM128.377 48.16C127.631 48.16 126.959 48.0053 126.361 47.696C125.764 47.3867 125.295 46.944 124.953 46.368C124.612 45.7813 124.441 45.072 124.441 44.24C124.441 43.44 124.607 42.7467 124.937 42.16C125.268 41.5733 125.716 41.12 126.281 40.8C126.847 40.48 127.476 40.32 128.169 40.32C128.905 40.32 129.54 40.464 130.073 40.752C130.607 41.04 131.017 41.4293 131.305 41.92C131.593 42.4 131.737 42.9493 131.737 43.568C131.737 43.7387 131.711 43.9307 131.657 44.144C131.615 44.3467 131.556 44.512 131.481 44.64H125.769C125.823 45.152 125.961 45.5893 126.185 45.952C126.42 46.304 126.735 46.5707 127.129 46.752C127.524 46.9333 127.977 47.024 128.489 47.024C128.991 47.024 129.428 46.9493 129.801 46.8C130.185 46.64 130.553 46.416 130.905 46.128L131.417 47.104C131.012 47.456 130.553 47.7227 130.041 47.904C129.529 48.0747 128.975 48.16 128.377 48.16ZM125.769 43.552H130.393C130.404 43.5307 130.409 43.5093 130.409 43.488C130.409 43.4667 130.409 43.4347 130.409 43.392C130.409 43.008 130.329 42.672 130.169 42.384C130.009 42.0853 129.764 41.856 129.433 41.696C129.113 41.536 128.708 41.456 128.217 41.456C127.833 41.456 127.471 41.5413 127.129 41.712C126.788 41.872 126.5 42.1067 126.265 42.416C126.031 42.7253 125.865 43.104 125.769 43.552ZM137.283 48.16C136.525 48.16 135.853 48 135.267 47.68C134.68 47.3493 134.221 46.8907 133.891 46.304C133.56 45.7173 133.395 45.0293 133.395 44.24C133.395 43.4507 133.56 42.7627 133.891 42.176C134.221 41.5893 134.68 41.136 135.267 40.816C135.853 40.4853 136.525 40.32 137.283 40.32C137.827 40.32 138.317 40.4 138.755 40.56C139.203 40.72 139.597 40.9493 139.939 41.248L139.443 42.224C139.101 41.9573 138.744 41.7653 138.371 41.648C137.997 41.52 137.635 41.456 137.283 41.456C136.771 41.456 136.323 41.568 135.939 41.792C135.555 42.016 135.256 42.336 135.043 42.752C134.829 43.168 134.723 43.664 134.723 44.24C134.723 44.816 134.829 45.312 135.043 45.728C135.256 46.144 135.555 46.464 135.939 46.688C136.323 46.912 136.771 47.024 137.283 47.024C137.635 47.024 137.997 46.9653 138.371 46.848C138.744 46.72 139.101 46.5227 139.443 46.256L139.939 47.232C139.597 47.5307 139.203 47.76 138.755 47.92C138.317 48.08 137.827 48.16 137.283 48.16ZM144.72 48.16C143.856 48.16 143.178 47.9147 142.688 47.424C142.197 46.9333 141.952 46.16 141.952 45.104V40.48H143.248V44.96C143.248 45.6853 143.392 46.2133 143.68 46.544C143.978 46.864 144.432 47.024 145.04 47.024C145.744 47.024 146.288 46.784 146.672 46.304C147.056 45.8133 147.248 45.152 147.248 44.32V40.48H148.544V48H147.296V46.816C147.072 47.232 146.741 47.5627 146.304 47.808C145.866 48.0427 145.338 48.16 144.72 48.16ZM154.117 48.096C153.37 48.096 152.81 47.92 152.437 47.568C152.074 47.2053 151.893 46.6453 151.893 45.888V41.6H150.213V40.48H151.893V38.336H153.189V40.48H155.173V41.6H153.189V45.792C153.189 46.1867 153.285 46.4853 153.477 46.688C153.669 46.88 153.962 46.976 154.357 46.976C154.485 46.976 154.629 46.9707 154.789 46.96C154.949 46.9493 155.077 46.9333 155.173 46.912V47.968C155.055 48.0107 154.895 48.0427 154.693 48.064C154.501 48.0853 154.309 48.096 154.117 48.096ZM160.596 48.16C159.849 48.16 159.177 48.0053 158.58 47.696C157.983 47.3867 157.513 46.944 157.172 46.368C156.831 45.7813 156.66 45.072 156.66 44.24C156.66 43.44 156.825 42.7467 157.156 42.16C157.487 41.5733 157.935 41.12 158.5 40.8C159.065 40.48 159.695 40.32 160.388 40.32C161.124 40.32 161.759 40.464 162.292 40.752C162.825 41.04 163.236 41.4293 163.524 41.92C163.812 42.4 163.956 42.9493 163.956 43.568C163.956 43.7387 163.929 43.9307 163.876 44.144C163.833 44.3467 163.775 44.512 163.7 44.64H157.988C158.041 45.152 158.18 45.5893 158.404 45.952C158.639 46.304 158.953 46.5707 159.348 46.752C159.743 46.9333 160.196 47.024 160.708 47.024C161.209 47.024 161.647 46.9493 162.02 46.8C162.404 46.64 162.772 46.416 163.124 46.128L163.636 47.104C163.231 47.456 162.772 47.7227 162.26 47.904C161.748 48.0747 161.193 48.16 160.596 48.16ZM157.988 43.552H162.612C162.623 43.5307 162.628 43.5093 162.628 43.488C162.628 43.4667 162.628 43.4347 162.628 43.392C162.628 43.008 162.548 42.672 162.388 42.384C162.228 42.0853 161.983 41.856 161.652 41.696C161.332 41.536 160.927 41.456 160.436 41.456C160.052 41.456 159.689 41.5413 159.348 41.712C159.007 41.872 158.719 42.1067 158.484 42.416C158.249 42.7253 158.084 43.104 157.988 43.552ZM169.229 48.16C168.536 48.16 167.917 48 167.373 47.68C166.829 47.36 166.403 46.9067 166.093 46.32C165.784 45.7333 165.629 45.04 165.629 44.24C165.629 43.4293 165.784 42.736 166.093 42.16C166.403 41.5733 166.829 41.12 167.373 40.8C167.917 40.48 168.536 40.32 169.229 40.32C169.848 40.32 170.392 40.4427 170.861 40.688C171.331 40.9333 171.688 41.2587 171.933 41.664V37.312H173.229V48H171.981V46.736C171.747 47.1627 171.389 47.5093 170.909 47.776C170.429 48.032 169.869 48.16 169.229 48.16ZM169.469 47.024C169.96 47.024 170.392 46.912 170.765 46.688C171.149 46.464 171.448 46.144 171.661 45.728C171.875 45.312 171.981 44.816 171.981 44.24C171.981 43.664 171.875 43.168 171.661 42.752C171.448 42.336 171.149 42.016 170.765 41.792C170.392 41.568 169.96 41.456 169.469 41.456C168.979 41.456 168.541 41.568 168.157 41.792C167.784 42.016 167.491 42.336 167.277 42.752C167.064 43.168 166.957 43.664 166.957 44.24C166.957 44.816 167.064 45.312 167.277 45.728C167.491 46.144 167.784 46.464 168.157 46.688C168.541 46.912 168.979 47.024 169.469 47.024ZM183.67 48.16C183.03 48.16 182.47 48.032 181.99 47.776C181.51 47.5093 181.153 47.1627 180.918 46.736V48H179.67V37.312H180.966V41.664C181.212 41.2587 181.569 40.9333 182.038 40.688C182.508 40.4427 183.052 40.32 183.67 40.32C184.364 40.32 184.982 40.48 185.526 40.8C186.07 41.12 186.497 41.5733 186.806 42.16C187.116 42.736 187.27 43.4293 187.27 44.24C187.27 45.04 187.116 45.7333 186.806 46.32C186.497 46.9067 186.07 47.36 185.526 47.68C184.982 48 184.364 48.16 183.67 48.16ZM183.43 47.024C183.921 47.024 184.353 46.912 184.726 46.688C185.11 46.464 185.409 46.144 185.622 45.728C185.836 45.312 185.942 44.816 185.942 44.24C185.942 43.664 185.836 43.168 185.622 42.752C185.409 42.336 185.11 42.016 184.726 41.792C184.353 41.568 183.921 41.456 183.43 41.456C182.94 41.456 182.502 41.568 182.118 41.792C181.745 42.016 181.452 42.336 181.238 42.752C181.025 43.168 180.918 43.664 180.918 44.24C180.918 44.816 181.025 45.312 181.238 45.728C181.452 46.144 181.745 46.464 182.118 46.688C182.502 46.912 182.94 47.024 183.43 47.024ZM189.229 51.008C188.919 51.008 188.61 50.9653 188.301 50.88C188.002 50.8053 187.735 50.6987 187.501 50.56L187.885 49.536C188.119 49.6533 188.343 49.7387 188.557 49.792C188.77 49.856 188.967 49.888 189.149 49.888C189.383 49.888 189.607 49.8293 189.821 49.712C190.034 49.6053 190.242 49.424 190.445 49.168C190.647 48.9227 190.85 48.592 191.053 48.176L187.917 40.48H189.309L191.693 46.64L194.077 40.48H195.469L192.397 48C192.077 48.7893 191.746 49.4027 191.405 49.84C191.063 50.2773 190.711 50.5813 190.349 50.752C189.986 50.9227 189.613 51.008 189.229 51.008ZM45.2903 67.16C44.533 67.16 43.861 67 43.2743 66.68C42.6876 66.3493 42.229 65.8907 41.8983 65.304C41.5676 64.7173 41.4023 64.0293 41.4023 63.24C41.4023 62.4507 41.5676 61.7627 41.8983 61.176C42.229 60.5893 42.6876 60.136 43.2743 59.816C43.861 59.4853 44.533 59.32 45.2903 59.32C46.0583 59.32 46.7303 59.4853 47.3063 59.816C47.893 60.136 48.3516 60.5893 48.6823 61.176C49.013 61.7627 49.1783 62.4507 49.1783 63.24C49.1783 64.0293 49.013 64.7173 48.6823 65.304C48.3516 65.8907 47.893 66.3493 47.3063 66.68C46.7303 67 46.0583 67.16 45.2903 67.16ZM45.2903 66.024C45.8023 66.024 46.2503 65.912 46.6343 65.688C47.0183 65.464 47.317 65.144 47.5303 64.728C47.7436 64.312 47.8503 63.816 47.8503 63.24C47.8503 62.664 47.7436 62.168 47.5303 61.752C47.317 61.336 47.0183 61.016 46.6343 60.792C46.2503 60.568 45.8023 60.456 45.2903 60.456C44.7783 60.456 44.3303 60.568 43.9463 60.792C43.5623 61.016 43.2636 61.336 43.0503 61.752C42.837 62.168 42.7303 62.664 42.7303 63.24C42.7303 63.816 42.837 64.312 43.0503 64.728C43.2636 65.144 43.5623 65.464 43.9463 65.688C44.3303 65.912 44.7783 66.024 45.2903 66.024ZM54.3118 67.096C53.5651 67.096 53.0051 66.92 52.6318 66.568C52.2691 66.2053 52.0878 65.6453 52.0878 64.888V60.6H50.4078V59.48H52.0878V57.336H53.3838V59.48H55.3678V60.6H53.3838V64.792C53.3838 65.1867 53.4798 65.4853 53.6718 65.688C53.8638 65.88 54.1571 65.976 54.5518 65.976C54.6798 65.976 54.8238 65.9707 54.9838 65.96C55.1438 65.9493 55.2718 65.9333 55.3678 65.912V66.968C55.2505 67.0107 55.0905 67.0427 54.8878 67.064C54.6958 67.0853 54.5038 67.096 54.3118 67.096ZM57.2874 67V56.312H58.5834V60.584C58.8181 60.1893 59.1434 59.88 59.5594 59.656C59.9861 59.432 60.5034 59.32 61.1114 59.32C61.9754 59.32 62.6528 59.5653 63.1434 60.056C63.6341 60.5467 63.8794 61.32 63.8794 62.376V67H62.5834V62.52C62.5834 61.7947 62.4341 61.272 62.1354 60.952C61.8474 60.6213 61.3994 60.456 60.7914 60.456C60.0874 60.456 59.5434 60.7013 59.1594 61.192C58.7754 61.672 58.5834 62.328 58.5834 63.16V67H57.2874ZM69.9164 67.16C69.1698 67.16 68.4978 67.0053 67.9004 66.696C67.3031 66.3867 66.8338 65.944 66.4924 65.368C66.1511 64.7813 65.9804 64.072 65.9804 63.24C65.9804 62.44 66.1458 61.7467 66.4764 61.16C66.8071 60.5733 67.2551 60.12 67.8204 59.8C68.3858 59.48 69.0151 59.32 69.7084 59.32C70.4444 59.32 71.0791 59.464 71.6124 59.752C72.1458 60.04 72.5564 60.4293 72.8444 60.92C73.1324 61.4 73.2764 61.9493 73.2764 62.568C73.2764 62.7387 73.2498 62.9307 73.1964 63.144C73.1538 63.3467 73.0951 63.512 73.0204 63.64H67.3084C67.3618 64.152 67.5004 64.5893 67.7244 64.952C67.9591 65.304 68.2738 65.5707 68.6684 65.752C69.0631 65.9333 69.5164 66.024 70.0284 66.024C70.5298 66.024 70.9671 65.9493 71.3404 65.8C71.7244 65.64 72.0924 65.416 72.4444 65.128L72.9564 66.104C72.5511 66.456 72.0924 66.7227 71.5804 66.904C71.0684 67.0747 70.5138 67.16 69.9164 67.16ZM67.3084 62.552H71.9324C71.9431 62.5307 71.9484 62.5093 71.9484 62.488C71.9484 62.4667 71.9484 62.4347 71.9484 62.392C71.9484 62.008 71.8684 61.672 71.7084 61.384C71.5484 61.0853 71.3031 60.856 70.9724 60.696C70.6524 60.536 70.2471 60.456 69.7564 60.456C69.3724 60.456 69.0098 60.5413 68.6684 60.712C68.3271 60.872 68.0391 61.1067 67.8044 61.416C67.5698 61.7253 67.4044 62.104 67.3084 62.552ZM75.3656 67V59.48H76.6136V60.856C76.8056 60.376 77.0882 60.0133 77.4616 59.768C77.8456 59.512 78.2776 59.384 78.7576 59.384C78.9069 59.384 79.0402 59.3947 79.1576 59.416C79.2856 59.4267 79.3869 59.448 79.4616 59.48V60.696C79.3229 60.664 79.1842 60.6427 79.0456 60.632C78.9069 60.6107 78.7682 60.6 78.6296 60.6C78.0642 60.6 77.5949 60.8453 77.2216 61.336C76.8482 61.816 76.6616 62.4933 76.6616 63.368V67H75.3656ZM83.8642 67.16C83.2882 67.16 82.7549 67.0747 82.2642 66.904C81.7735 66.7227 81.2935 66.4613 80.8242 66.12L81.4162 65.064C81.8749 65.384 82.2962 65.624 82.6802 65.784C83.0749 65.944 83.4749 66.024 83.8802 66.024C84.4775 66.024 84.9255 65.9333 85.2242 65.752C85.5229 65.56 85.6722 65.2827 85.6722 64.92C85.6722 64.6213 85.5815 64.4027 85.4002 64.264C85.2295 64.1147 84.9202 63.9973 84.4722 63.912L83.1122 63.656C82.4295 63.528 81.9175 63.2987 81.5762 62.968C81.2349 62.6373 81.0642 62.2107 81.0642 61.688C81.0642 61.2613 81.1709 60.872 81.3842 60.52C81.6082 60.1573 81.9335 59.8693 82.3602 59.656C82.7869 59.432 83.3202 59.32 83.9602 59.32C84.5042 59.32 85.0109 59.4053 85.4802 59.576C85.9602 59.736 86.3869 59.9547 86.7602 60.232L86.1842 61.256C85.8642 61.0213 85.5229 60.8293 85.1602 60.68C84.7975 60.5307 84.4135 60.456 84.0082 60.456C83.5069 60.456 83.1122 60.5467 82.8242 60.728C82.5362 60.8987 82.3922 61.1707 82.3922 61.544C82.3922 61.7893 82.4775 61.9813 82.6482 62.12C82.8189 62.2587 83.1069 62.3653 83.5122 62.44L84.8722 62.696C85.5549 62.824 86.0775 63.048 86.4402 63.368C86.8135 63.688 87.0002 64.1627 87.0002 64.792C87.0002 65.4853 86.7335 66.056 86.2002 66.504C85.6669 66.9413 84.8882 67.16 83.8642 67.16ZM89.3239 69.432L88.6359 69.096C88.8386 68.7547 88.9879 68.408 89.0839 68.056C89.1906 67.704 89.2439 67.32 89.2439 66.904V65.656H90.4439V66.904C90.4439 67.5013 90.3533 67.9973 90.1719 68.392C90.0013 68.7867 89.7186 69.1333 89.3239 69.432ZM100.478 67.16C99.7205 67.16 99.0485 67 98.4618 66.68C97.8751 66.3493 97.4165 65.8907 97.0858 65.304C96.7551 64.7173 96.5898 64.0293 96.5898 63.24C96.5898 62.4507 96.7551 61.7627 97.0858 61.176C97.4165 60.5893 97.8751 60.136 98.4618 59.816C99.0485 59.4853 99.7205 59.32 100.478 59.32C101.246 59.32 101.918 59.4853 102.494 59.816C103.08 60.136 103.539 60.5893 103.87 61.176C104.2 61.7627 104.366 62.4507 104.366 63.24C104.366 64.0293 104.2 64.7173 103.87 65.304C103.539 65.8907 103.08 66.3493 102.494 66.68C101.918 67 101.246 67.16 100.478 67.16ZM100.478 66.024C100.99 66.024 101.438 65.912 101.822 65.688C102.206 65.464 102.504 65.144 102.718 64.728C102.931 64.312 103.038 63.816 103.038 63.24C103.038 62.664 102.931 62.168 102.718 61.752C102.504 61.336 102.206 61.016 101.822 60.792C101.438 60.568 100.99 60.456 100.478 60.456C99.9658 60.456 99.5178 60.568 99.1338 60.792C98.7498 61.016 98.4511 61.336 98.2378 61.752C98.0245 62.168 97.9178 62.664 97.9178 63.24C97.9178 63.816 98.0245 64.312 98.2378 64.728C98.4511 65.144 98.7498 65.464 99.1338 65.688C99.5178 65.912 99.9658 66.024 100.478 66.024ZM106.459 67V59.48H107.707V60.856C107.899 60.376 108.182 60.0133 108.555 59.768C108.939 59.512 109.371 59.384 109.851 59.384C110.001 59.384 110.134 59.3947 110.251 59.416C110.379 59.4267 110.481 59.448 110.555 59.48V60.696C110.417 60.664 110.278 60.6427 110.139 60.632C110.001 60.6107 109.862 60.6 109.723 60.6C109.158 60.6 108.689 60.8453 108.315 61.336C107.942 61.816 107.755 62.4933 107.755 63.368V67H106.459ZM116.256 67V56.312H117.552V60.584C117.787 60.1893 118.112 59.88 118.528 59.656C118.955 59.432 119.472 59.32 120.08 59.32C120.944 59.32 121.622 59.5653 122.112 60.056C122.603 60.5467 122.848 61.32 122.848 62.376V67H121.552V62.52C121.552 61.7947 121.403 61.272 121.104 60.952C120.816 60.6213 120.368 60.456 119.76 60.456C119.056 60.456 118.512 60.7013 118.128 61.192C117.744 61.672 117.552 62.328 117.552 63.16V67H116.256ZM128.837 67.16C128.08 67.16 127.408 67 126.821 66.68C126.235 66.3493 125.776 65.8907 125.445 65.304C125.115 64.7173 124.949 64.0293 124.949 63.24C124.949 62.4507 125.115 61.7627 125.445 61.176C125.776 60.5893 126.235 60.136 126.821 59.816C127.408 59.4853 128.08 59.32 128.837 59.32C129.605 59.32 130.277 59.4853 130.853 59.816C131.44 60.136 131.899 60.5893 132.229 61.176C132.56 61.7627 132.725 62.4507 132.725 63.24C132.725 64.0293 132.56 64.7173 132.229 65.304C131.899 65.8907 131.44 66.3493 130.853 66.68C130.277 67 129.605 67.16 128.837 67.16ZM128.837 66.024C129.349 66.024 129.797 65.912 130.181 65.688C130.565 65.464 130.864 65.144 131.077 64.728C131.291 64.312 131.397 63.816 131.397 63.24C131.397 62.664 131.291 62.168 131.077 61.752C130.864 61.336 130.565 61.016 130.181 60.792C129.797 60.568 129.349 60.456 128.837 60.456C128.325 60.456 127.877 60.568 127.493 60.792C127.109 61.016 126.811 61.336 126.597 61.752C126.384 62.168 126.277 62.664 126.277 63.24C126.277 63.816 126.384 64.312 126.597 64.728C126.811 65.144 127.109 65.464 127.493 65.688C127.877 65.912 128.325 66.024 128.837 66.024ZM137.859 67.096C137.112 67.096 136.552 66.92 136.179 66.568C135.816 66.2053 135.635 65.6453 135.635 64.888V60.6H133.955V59.48H135.635V57.336H136.931V59.48H138.915V60.6H136.931V64.792C136.931 65.1867 137.027 65.4853 137.219 65.688C137.411 65.88 137.704 65.976 138.099 65.976C138.227 65.976 138.371 65.9707 138.531 65.96C138.691 65.9493 138.819 65.9333 138.915 65.912V66.968C138.797 67.0107 138.637 67.0427 138.435 67.064C138.243 67.0853 138.051 67.096 137.859 67.096ZM147.925 67.16C147.231 67.16 146.613 67 146.069 66.68C145.525 66.36 145.098 65.9067 144.789 65.32C144.479 64.7333 144.325 64.04 144.325 63.24C144.325 62.4293 144.479 61.736 144.789 61.16C145.098 60.5733 145.525 60.12 146.069 59.8C146.613 59.48 147.231 59.32 147.925 59.32C148.543 59.32 149.087 59.4427 149.557 59.688C150.026 59.9333 150.383 60.2587 150.629 60.664V56.312H151.925V67H150.677V65.736C150.442 66.1627 150.085 66.5093 149.605 66.776C149.125 67.032 148.565 67.16 147.925 67.16ZM148.165 66.024C148.655 66.024 149.087 65.912 149.461 65.688C149.845 65.464 150.143 65.144 150.357 64.728C150.57 64.312 150.677 63.816 150.677 63.24C150.677 62.664 150.57 62.168 150.357 61.752C150.143 61.336 149.845 61.016 149.461 60.792C149.087 60.568 148.655 60.456 148.165 60.456C147.674 60.456 147.237 60.568 146.853 60.792C146.479 61.016 146.186 61.336 145.973 61.752C145.759 62.168 145.653 62.664 145.653 63.24C145.653 63.816 145.759 64.312 145.973 64.728C146.186 65.144 146.479 65.464 146.853 65.688C147.237 65.912 147.674 66.024 148.165 66.024ZM156.859 67.16C156.283 67.16 155.782 67.0747 155.355 66.904C154.939 66.7227 154.614 66.4667 154.379 66.136C154.145 65.7947 154.027 65.3893 154.027 64.92C154.027 64.4507 154.145 64.056 154.379 63.736C154.614 63.416 154.945 63.1653 155.371 62.984C155.798 62.792 156.294 62.664 156.859 62.6L159.579 62.264C159.515 61.6453 159.291 61.192 158.907 60.904C158.534 60.6053 158.054 60.456 157.467 60.456C157.105 60.456 156.726 60.536 156.331 60.696C155.937 60.8453 155.526 61.0747 155.099 61.384L154.571 60.392C154.966 60.0613 155.409 59.8 155.899 59.608C156.401 59.416 156.923 59.32 157.467 59.32C158.598 59.32 159.451 59.5813 160.027 60.104C160.603 60.6267 160.891 61.4 160.891 62.424V67H159.643V65.832C159.366 66.28 158.987 66.616 158.507 66.84C158.027 67.0533 157.478 67.16 156.859 67.16ZM157.099 66.024C157.643 66.024 158.102 65.9173 158.475 65.704C158.849 65.48 159.126 65.192 159.307 64.84C159.499 64.4773 159.595 64.0987 159.595 63.704V63.336L157.195 63.64C156.598 63.7147 156.139 63.8427 155.819 64.024C155.51 64.1947 155.355 64.4827 155.355 64.888C155.355 65.2507 155.51 65.5333 155.819 65.736C156.129 65.928 156.555 66.024 157.099 66.024ZM163.412 69.912V59.48H164.66V60.744C164.895 60.3173 165.252 59.976 165.732 59.72C166.212 59.4533 166.772 59.32 167.412 59.32C168.106 59.32 168.724 59.48 169.268 59.8C169.812 60.12 170.239 60.5733 170.548 61.16C170.858 61.736 171.012 62.4293 171.012 63.24C171.012 64.04 170.858 64.7333 170.548 65.32C170.239 65.9067 169.812 66.36 169.268 66.68C168.724 67 168.106 67.16 167.412 67.16C166.794 67.16 166.25 67.0373 165.78 66.792C165.311 66.5467 164.954 66.2213 164.708 65.816V69.912H163.412ZM167.172 66.024C167.663 66.024 168.095 65.912 168.468 65.688C168.852 65.464 169.151 65.144 169.364 64.728C169.578 64.312 169.684 63.816 169.684 63.24C169.684 62.664 169.578 62.168 169.364 61.752C169.151 61.336 168.852 61.016 168.468 60.792C168.095 60.568 167.663 60.456 167.172 60.456C166.682 60.456 166.244 60.568 165.86 60.792C165.487 61.016 165.194 61.336 164.98 61.752C164.767 62.168 164.66 62.664 164.66 63.24C164.66 63.816 164.767 64.312 164.98 64.728C165.194 65.144 165.487 65.464 165.86 65.688C166.244 65.912 166.682 66.024 167.172 66.024ZM173.131 69.912V59.48H174.379V60.744C174.614 60.3173 174.971 59.976 175.451 59.72C175.931 59.4533 176.491 59.32 177.131 59.32C177.825 59.32 178.443 59.48 178.987 59.8C179.531 60.12 179.958 60.5733 180.267 61.16C180.577 61.736 180.731 62.4293 180.731 63.24C180.731 64.04 180.577 64.7333 180.267 65.32C179.958 65.9067 179.531 66.36 178.987 66.68C178.443 67 177.825 67.16 177.131 67.16C176.513 67.16 175.969 67.0373 175.499 66.792C175.03 66.5467 174.673 66.2213 174.427 65.816V69.912H173.131ZM176.891 66.024C177.382 66.024 177.814 65.912 178.187 65.688C178.571 65.464 178.87 65.144 179.083 64.728C179.297 64.312 179.403 63.816 179.403 63.24C179.403 62.664 179.297 62.168 179.083 61.752C178.87 61.336 178.571 61.016 178.187 60.792C177.814 60.568 177.382 60.456 176.891 60.456C176.401 60.456 175.963 60.568 175.579 60.792C175.206 61.016 174.913 61.336 174.699 61.752C174.486 62.168 174.379 62.664 174.379 63.24C174.379 63.816 174.486 64.312 174.699 64.728C174.913 65.144 175.206 65.464 175.579 65.688C175.963 65.912 176.401 66.024 176.891 66.024ZM185.458 67.16C184.882 67.16 184.349 67.0747 183.858 66.904C183.367 66.7227 182.887 66.4613 182.418 66.12L183.01 65.064C183.469 65.384 183.89 65.624 184.274 65.784C184.669 65.944 185.069 66.024 185.474 66.024C186.071 66.024 186.519 65.9333 186.818 65.752C187.117 65.56 187.266 65.2827 187.266 64.92C187.266 64.6213 187.175 64.4027 186.994 64.264C186.823 64.1147 186.514 63.9973 186.066 63.912L184.706 63.656C184.023 63.528 183.511 63.2987 183.17 62.968C182.829 62.6373 182.658 62.2107 182.658 61.688C182.658 61.2613 182.765 60.872 182.978 60.52C183.202 60.1573 183.527 59.8693 183.954 59.656C184.381 59.432 184.914 59.32 185.554 59.32C186.098 59.32 186.605 59.4053 187.074 59.576C187.554 59.736 187.981 59.9547 188.354 60.232L187.778 61.256C187.458 61.0213 187.117 60.8293 186.754 60.68C186.391 60.5307 186.007 60.456 185.602 60.456C185.101 60.456 184.706 60.5467 184.418 60.728C184.13 60.8987 183.986 61.1707 183.986 61.544C183.986 61.7893 184.071 61.9813 184.242 62.12C184.413 62.2587 184.701 62.3653 185.106 62.44L186.466 62.696C187.149 62.824 187.671 63.048 188.034 63.368C188.407 63.688 188.594 64.1627 188.594 64.792C188.594 65.4853 188.327 66.056 187.794 66.504C187.261 66.9413 186.482 67.16 185.458 67.16Z"
      fill="#E9F456"
    />
    <path
      d="M126.37 94.4993C131.82 104.869 127.524 125.425 119.674 125.791C109.861 126.248 109.543 113.396 115.829 112.696C122.114 111.996 130.499 122.994 117.895 134.103C107.812 142.99 97.446 145.237 93.5231 145.25M93.5231 145.25L98.5492 136.099M93.5231 145.25L103.756 149.996"
      stroke="url(#paint1_linear_397_843)"
      stroke-linecap="round"
    />
    <defs>
      <linearGradient id="paint0_linear_397_843" x1="113" y1="1" x2="113" y2="84" gradientUnits="userSpaceOnUse">
        <stop stop-color="#EEF3BC" />
        <stop offset="1" stop-color="#EAF45A" />
      </linearGradient>
      <linearGradient
        id="paint1_linear_397_843"
        x1="108.157"
        y1="150.938"
        x2="119.666"
        y2="97.155"
        gradientUnits="userSpaceOnUse"
      >
        <stop stop-color="#EEF3BC" />
        <stop offset="1" stop-color="#EAF45A" />
      </linearGradient>
    </defs>
  </svg>
);

const switchIcon = 'https://ipfs.near.social/ipfs/bafkreigkkvqns7dxrbopcf22gvkpi4uvopladrr2p6arcvon7pzul7iiry';

const closeIcon = 'https://ipfs.near.social/ipfs/bafkreiay565opvpvtxexcxkfo7cif3ecn4znoarnutcvhjggiczjpuvbbq';

const NoQuestWrapper = styled.div`
  .no-quest-tip {
    font-size: 16px;
    font-weight: 400;
    line-height: 19px;
    text-align: left;
    color: #979abe;
    padding: 0px 20px;
    display: flex;
    align-items: center;
    gap: 32px;

    .no-quest-tip-text {
      width: 471px;
    }

    .search-tip {
      position: relative;
      bottom: 32px;
    }

    .trends-tip {
      position: relative;
      top: 36px;
    }
  }
  @media (max-width: 900px) {
    .search-tip {
      display: none;
    }

    .trends-tip {
      display: none;
    }
  }
`;

const CardListWrapper = styled.div`
  display: flex;
  align-items: center;
  gap: 18px;
  flex-wrap: wrap;
  margin-bottom: 60px;
  .CardListWrapper-title {
    display: none;
  }
  @media (max-width: 900px) {
    display: block;
    .CardListWrapper-title {
      display: flex;
      justify-content: space-between;
      padding: 0 16px;
      margin-bottom: 18px;
      .CardListWrapper-title-text {
        align-self: flex-start;
        font-size: 18px;
        color: #ffffff;
      }
      .CardListWrapper-title-btn {
        align-self: flex-start;
        display: flex;
        .execute-records {
          color: #ecf488;
          border: 1px solid #ecf488;
          background: rgba(55, 58, 83, 0.5);
          width: 133px;
          border-radius: 8px;
          text-align: center;
          display: flex;
          align-items: center;
          justify-content: center;
          gap: 6px;
          font-size: 14px;
          height: 32px;
          line-height: 32px;
          :hover {
            text-decoration: none;
          }
        }
        .title-btn-icon {
          margin-left: 10px;
          width: 32px;
          height: 32px;
          line-height: 32px;
          background: rgba(55, 58, 83, 0.5);
          text-align: center;
          display: flex;
          align-items: center;
          justify-content: center;
          border-radius: 8px;
          img {
            width: 16px;
            height: 13px;
          }
        }
      }
    }
  }
`;

const OperationWrapper = styled.div`
  position: relative;
  margin-top: 16px;
  width: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 14px;

  .delete-card {
    width: 250px;
    border-radius: 16px;
    background: linear-gradient(0deg, #1e202f, #1e202f);
    border: 1px solid #ff61d34d;
    box-shadow: 0px 0px 16px 0px #00000040;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-direction: column;
    gap: 14px;
    color: white;
    position: absolute;
    /* top: 150px; */
    right: 0;
    top: 30px;
    z-index: 9999;
    padding: 12px;
    padding-top: 18px;

    .delete-card-mobile {
      display: none;
    }

    .delete-card-operation {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 12px;

      .delete-card-cancel-button {
        color: #979abe;
        width: 108px;
        height: 32px;
        border-radius: 8px;
        border: 1px;
        cursor: pointer;
        border: 1px solid #979abe;
        display: flex;
        align-items: center;
        justify-content: center;
      }
      .delete-card-delete-button {
        width: 108px;
        height: 32px;
        border-radius: 8px;
        border: 1px;
        cursor: pointer;
        background: #ff61d3;
        display: flex;
        align-items: center;
        justify-content: center;
      }
    }
  }

  .show-all {
    width: 158px;
    height: 33px;
    border-radius: 20px;
    border: 1px solid #ecf488;
    display: flex;
    align-items: center;
    justify-content: center;
    color: #ebf479;
    cursor: pointer;
    .down-icon {
      padding-left: 8px;
    }

    .up-icon {
      padding-left: 8px;
      transform: rotate(180deg);
    }
  }

  .remove-all {
    width: 121px;
    height: 33px;
    border-radius: 20px;
    background: #292c3f;
    color: #979abe;

    position: absolute;
    right: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;

    :hover {
      color: #ff61d3;

      .delete-icon {
        color: #ff61d3;
        border: 2px solid #ff61d3;

        .row-bar {
          background: #ff61d3;
        }
      }
    }

    cursor: pointer;

    .delete-icon {
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 100%;
      border: 2px solid #7c7f96;
      width: 16px;
      height: 16px;

      .row-bar {
        width: 75%;
        height: 2px;
        background: #7c7f96;
        border-radius: 6px;
      }
    }
  }
`;

const MyQuest: NextPageWithLayout = () => {
  const [innerWidth, setInnerWidth] = useState<number>(typeof window !== 'undefined' ? window.innerWidth : 0);
  const [putMenu, setPutMenu] = useState(false);
  const [showAll, setShowAll] = useState(false);
  const [showRemoveAll, setShowRemoveAll] = useState(false);
  const [shouldRemoveAll, setShouldRemoveAll] = useState(false);
  const [sender, setSender] = useState<string>('');
  const ethersProviderContext = useEthersProviderContext();
  const { provider, useConnectWallet } = ethersProviderContext;
  const [{ wallet, connecting }, connect, disconnect] = useConnectWallet();
  const [showSwitch, setShowSwitch] = useState(false);
  const [myQuestList, setMyQuestList] = useState<any[]>([]);
  const [forceReload, setForceReload] = useState(false);
  const [questLoadDone, setQuestLoadDone] = useState(false);
  const uuid = useUUIdStore((store: any) => store.uuid);
  const [realList, setRealList] = useState<any[]>([]);
  const [remainingQuests, setRemainingQuests] = useState<any[]>([]);
  const [haveMoreCard, setHaveMoreCard] = useState(false);
  useEffect(() => {
    const offset = putMenu ? 170 : 350;

    const innerWidth = window.innerWidth;
    setInnerWidth(innerWidth > 900 ? innerWidth - offset : innerWidth);
    const handleResize = () => {
      const innerWidth = window.innerWidth;

      setInnerWidth(innerWidth > 900 ? innerWidth - offset : innerWidth);
    };
    window.addEventListener('resize', handleResize);
    return () => window.removeEventListener('resize', handleResize);
  }, [putMenu]);

  useEffect(() => {
    const getPutMenu = (e: any) => {
      setPutMenu(e.detail);
    };
    window.addEventListener('changePutEvent', getPutMenu);
    return () => window.removeEventListener('setItemEvent', getPutMenu);
  }, []);
  useEffect(() => {
    if (!wallet || !provider) return;
    const etherProvider = new ethers.providers.Web3Provider(window.ethereum);
    etherProvider.send('eth_requestAccounts', []).then((accounts) => {
      const currentAccount = accounts[0];
      const originalCaseAddress = ethers.utils.getAddress(currentAccount);
      setSender(originalCaseAddress.toString());
    });
  }, [wallet, provider]);

  const fetchMyQuestList = async () => {
    try {
      const resultMyQuestList = await get(
        `${QUEST_PATH}/api/action/get-action-by-account?account_id=${sender}&account_info=${uuid}&chain_id=1101`,
      );
      if (resultMyQuestList.code === 0) {
        setMyQuestList(resultMyQuestList.data);
      }
    } catch (error) {
      console.error('Error fetching resultMyQuestList data:', error);
    }
  };
  useEffect(() => {
    if (sender) {
      setTimeout(() => {
        fetchMyQuestList();
      }, 100);
    }
  }, [sender]);

  function showSwitchUpdate() {
    setShowSwitch(!showSwitch);
  }
  useEffect(() => {
    const itemWidth = 259;
    const itemMargin = 10;
    const resultInnerWidth = innerWidth - 240;
    const size = resultInnerWidth ? Math.floor(resultInnerWidth / (itemWidth + itemMargin)) * 2 : 0;
    const newRealList = myQuestList.slice(0, Math.min(size, myQuestList.length));
    setRealList(newRealList);
    setRemainingQuests(
      myQuestList.filter((item) => !newRealList.find((realItem) => realItem.action_id === item.action_id)),
    );
  }, [myQuestList]);

  useEffect(() => {
    setHaveMoreCard(myQuestList.length > realList.length);
  }, [myQuestList, realList]);

  useEffect(() => {
    if (!shouldRemoveAll) return;

    const action_id_list = myQuestList.map((item) => item.action_id.toString());

    const fetchDeleteQuestList = async () => {
      try {
        const resultDeleteQuestList = await deleteRequest(`${QUEST_PATH}/api/action/batch-delete-action`, {
          action_id_list: action_id_list,
        });
        if (resultDeleteQuestList.code === 0) {
          setMyQuestList([]);
          setShowRemoveAll(false);
        }
      } catch (error) {
        console.error('Error fetching resultMyQuestList data:', error);
      }
    };

    fetchDeleteQuestList();
    setShouldRemoveAll(false);
  }, [shouldRemoveAll]);

  function handleRemoveAll() {
    setShouldRemoveAll(true);
  }
  const onDelete = async (action_id: any) => {
    const action = { action_id: action_id };
    try {
      const resultDeleteQuestList = await deleteRequest(`${QUEST_PATH}/api/action/delete-action-by-id`, action);
      if (resultDeleteQuestList.code === 0) {
        fetchMyQuestList();
      }
    } catch (error) {
      console.error('Error fetching resultMyQuestList data:', error);
    }
  };
  return myQuestList.length > 0 ? (
    <CardListWrapper>
      <div className="CardListWrapper-title">
        <div className="CardListWrapper-title-text">{myQuestList.length} Quests</div>
        <div className="CardListWrapper-title-btn">
          <a href="/guessme.near/widget/ZKEVM.ExecuteRecords" className="execute-records">
            Execute Records
          </a>
          <div className="title-btn-icon" onClick={showSwitchUpdate}>
            <img src={showSwitch ? closeIcon : switchIcon} alt="Icon" />
          </div>
        </div>
      </div>
      {realList.map((item, index) => {
        return (
          <QuestCard
            key={item.action_id + '-' + index}
            item={item}
            onDelete={onDelete}
            showPopup={showSwitch || false}
          />
        );
      })}
      {haveMoreCard &&
        showAll &&
        remainingQuests.map((item, index) => {
          return (
            <QuestCard
              key={item.action_id + '-' + index}
              item={item}
              onDelete={onDelete}
              showPopup={false}
              isInMoreList={true}
              onStickyTop={() => {
                const curList = myQuestList;
                const curIndex = curList.findIndex((curItem) => curItem.action_id === item.action_id);
                const newList = [curList[curIndex], ...curList.slice(0, curIndex), ...curList.slice(curIndex + 1)];
                setMyQuestList(newList);
              }}
            />
          );
        })}
      <OperationWrapper>
        {haveMoreCard && (
          <div
            className="show-all"
            onClick={() => {
              setShowAll(!showAll);
            }}
          >
            <span>
              {showAll ? 'Hide more quests' : 'Show all quests'}
              <span className={`down-icon`}>{showAll ? arrowUp : arrowDown}</span>
            </span>
          </div>
        )}

        <div
          className="remove-all"
          style={{
            color: showRemoveAll ? '#FF61D3' : '',
          }}
          onClick={() => {
            setShowRemoveAll(!showRemoveAll);
          }}
        >
          Remove all
          <div
            className="delete-icon"
            style={{
              border: showRemoveAll ? '2px solid #ff61d3' : '',
            }}
          >
            <div
              className="row-bar"
              style={{
                background: showRemoveAll ? '#ff61d3' : '',
              }}
            ></div>
          </div>
        </div>

        {showRemoveAll && (
          <div className="delete-card">
            <span>Are you sure you want to remove all quests?</span>

            <div className="delete-card-operation">
              <div
                className="delete-card-cancel-button"
                onClick={() => {
                  setShowRemoveAll(false);
                }}
              >
                Cancel
              </div>

              <div
                className="delete-card-delete-button"
                onClick={() => {
                  handleRemoveAll();
                }}
              >
                Remove all
              </div>
            </div>
          </div>
        )}
      </OperationWrapper>
    </CardListWrapper>
  ) : (
    <NoQuestWrapper>
      <div className="no-quest-tip">
        <span className="no-quest-tip-text">
          You can add a quest when making transaction, and the quest will be listed here after successful transaction.
        </span>
        <div className="search-tip">{searchTip}</div>

        <div className="trends-tip">{trendsTip}</div>
      </div>
    </NoQuestWrapper>
  );
};

MyQuest.getLayout = useDefaultLayout;

export default MyQuest;
